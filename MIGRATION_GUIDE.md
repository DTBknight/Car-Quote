# 腾讯云云开发迁移指南

## 🎯 迁移目标

将汽车报价系统从 Netlify + Vercel 迁移到腾讯云云开发平台。

## 📋 迁移步骤

### 第一步：注册腾讯云账号

1. 访问 [腾讯云官网](https://cloud.tencent.com/)
2. 注册账号并完成实名认证
3. 开通云开发服务

### 第二步：创建云开发环境

1. 登录 [腾讯云云开发控制台](https://console.cloud.tencent.com/tcb)
2. 点击"创建环境"
3. 选择"按量计费"（有免费额度）
4. 记录环境ID（形如：`abc123-def456`）

### 第三步：安装云开发CLI

```bash
# 安装云开发CLI
npm install -g @cloudbase/cli

# 登录云开发
tcb login
```

### 第四步：配置项目

1. 更新 `cloudbase.json` 中的环境ID
2. 更新 `js/config-tencent.js` 中的环境ID
3. 运行部署脚本：

```bash
./deploy-tencent.sh
```

### 第五步：验证部署

1. 访问静态网站：`https://your-env-id.service.tcloudbase.com`
2. 测试云函数：`https://your-env-id.service.tcloudbase.com/generate-contract`
3. 测试合同生成功能

## 🔧 文件结构

```
Car-Quote/
├── cloudbase.json              # 云开发配置文件
├── deploy-tencent.sh           # 部署脚本
├── cloudfunctions/             # 云函数目录
│   └── generate-contract/      # 合同生成函数
│       ├── index.py           # 函数入口
│       └── requirements.txt   # Python依赖
├── js/
│   ├── config.js              # 原配置（Netlify+Vercel）
│   └── config-tencent.js      # 腾讯云配置
└── ... (其他前端文件)
```

## 🌐 域名配置

### 自动域名
- 格式：`https://your-env-id.service.tcloudbase.com`
- 优点：免费，自动SSL
- 缺点：域名较长

### 自定义域名
1. 在云开发控制台配置自定义域名
2. 添加CNAME记录指向云开发域名
3. 上传SSL证书（可选，云开发提供免费证书）

## 💰 成本估算

### 免费额度（每月）
- 静态网站托管：1GB存储 + 5GB流量
- 云函数：100万次调用
- 云数据库：1GB存储 + 100万次读写

### 超出免费额度
- 静态网站：¥0.1/GB/月
- 云函数：¥0.0001/次调用
- 云数据库：¥0.1/GB/月

## 🔄 迁移策略

### 方案一：完全迁移
1. 部署到腾讯云
2. 更新域名解析
3. 停用原部署

### 方案二：双平台部署
1. 保持原部署作为备份
2. 新用户使用腾讯云版本
3. 逐步迁移用户

### 方案三：灰度发布
1. 部分用户使用腾讯云版本
2. 收集反馈和性能数据
3. 逐步扩大范围

## 🚨 注意事项

1. **数据迁移**：确保所有静态数据文件已上传
2. **API兼容性**：确保云函数API与原API兼容
3. **性能测试**：测试国内访问速度
4. **监控告警**：设置云开发监控和告警
5. **备份策略**：定期备份重要数据

## 🆘 故障排除

### 常见问题

1. **云函数部署失败**
   - 检查Python版本兼容性
   - 确认依赖包正确安装
   - 查看云函数日志

2. **静态网站访问失败**
   - 检查文件路径配置
   - 确认域名解析正确
   - 查看控制台错误信息

3. **CORS错误**
   - 确认云函数CORS配置正确
   - 检查请求头设置
   - 测试OPTIONS预检请求

### 技术支持

- 腾讯云云开发文档：https://cloud.tencent.com/document/product/876
- 开发者社区：https://cloud.tencent.com/developer
- 技术支持：4009-100-100

## ✅ 迁移检查清单

- [ ] 腾讯云账号注册和实名认证
- [ ] 云开发环境创建
- [ ] 云开发CLI安装和登录
- [ ] 项目配置文件更新
- [ ] 云函数部署测试
- [ ] 静态网站部署测试
- [ ] 功能完整性验证
- [ ] 性能测试
- [ ] 域名配置（可选）
- [ ] 监控告警设置
- [ ] 文档更新
- [ ] 用户通知

## 🎉 迁移完成

迁移完成后，您将获得：

- ✅ 更快的国内访问速度
- ✅ 更好的中文技术支持
- ✅ 更充足的免费额度
- ✅ 更简单的部署流程
- ✅ 更稳定的服务保障 