<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScriptæ¨¡å—è°ƒè¯•</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .status { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .loading { background-color: #fff3cd; color: #856404; }
        pre { background-color: #f8f9fa; padding: 10px; border-radius: 5px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>JavaScriptæ¨¡å—è°ƒè¯•</h1>
    <div id="status"></div>
    <div id="results"></div>

    <script type="module">
        const statusDiv = document.getElementById('status');
        const resultsDiv = document.getElementById('results');
        
        function updateStatus(message, type = 'loading') {
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }
        
        function logResult(title, content) {
            resultsDiv.innerHTML += `
                <h3>${title}</h3>
                <pre>${JSON.stringify(content, null, 2)}</pre>
            `;
        }
        
        async function debugModules() {
            try {
                updateStatus('å¼€å§‹è°ƒè¯•JavaScriptæ¨¡å—åŠ è½½...', 'loading');
                
                // 1. æµ‹è¯•åŸºç¡€æ¨¡å—å¯¼å…¥
                updateStatus('æµ‹è¯•åŸºç¡€æ¨¡å—å¯¼å…¥...', 'loading');
                const { Utils } = await import('./js/utils.js');
                updateStatus('âœ… Utilsæ¨¡å—åŠ è½½æˆåŠŸ', 'success');
                
                // 2. æµ‹è¯•é…ç½®æ¨¡å—
                updateStatus('æµ‹è¯•é…ç½®æ¨¡å—...', 'loading');
                const CONFIG = await import('./js/config.js');
                updateStatus('âœ… Configæ¨¡å—åŠ è½½æˆåŠŸ', 'success');
                logResult('CONFIGå†…å®¹', CONFIG);
                
                // 3. æµ‹è¯•åŠ è½½ç®¡ç†å™¨
                updateStatus('æµ‹è¯•åŠ è½½ç®¡ç†å™¨...', 'loading');
                const { LoadingManager } = await import('./js/loadingManager.js');
                const loadingManager = new LoadingManager();
                updateStatus('âœ… LoadingManageråŠ è½½æˆåŠŸ', 'success');
                
                // 4. æµ‹è¯•æ±½è½¦æœç´¢æ¨¡å—
                updateStatus('æµ‹è¯•æ±½è½¦æœç´¢æ¨¡å—...', 'loading');
                const { CarSearch } = await import('./js/carSearch.js');
                const carSearch = new CarSearch();
                updateStatus('âœ… CarSearchæ¨¡å—åŠ è½½æˆåŠŸ', 'success');
                
                // 5. æµ‹è¯•æ•°æ®åŠ è½½
                updateStatus('æµ‹è¯•æ•°æ®åŠ è½½...', 'loading');
                await carSearch.initialize();
                updateStatus('âœ… æ•°æ®åŠ è½½æˆåŠŸ', 'success');
                logResult('æ±½è½¦æ•°æ®ç»Ÿè®¡', {
                    totalCars: carSearch.allCars.length,
                    loaded: carSearch.allCarsLoaded
                });
                
                // 6. æµ‹è¯•ä¸»åº”ç”¨
                updateStatus('æµ‹è¯•ä¸»åº”ç”¨...', 'loading');
                const { CarQuoteApp } = await import('./js/app.js');
                const app = CarQuoteApp.getInstance();
                updateStatus('âœ… ä¸»åº”ç”¨åŠ è½½æˆåŠŸ', 'success');
                
                updateStatus('ğŸ‰ æ‰€æœ‰æ¨¡å—åŠ è½½æˆåŠŸï¼', 'success');
                
            } catch (error) {
                updateStatus(`âŒ æ¨¡å—åŠ è½½å¤±è´¥: ${error.message}`, 'error');
                logResult('é”™è¯¯è¯¦æƒ…', {
                    message: error.message,
                    stack: error.stack,
                    time: new Date().toLocaleString()
                });
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹è°ƒè¯•
        document.addEventListener('DOMContentLoaded', debugModules);
    </script>
</body>
</html> 