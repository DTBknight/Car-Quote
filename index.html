<!DOCTYPE html>
<html lang="zh-CN" class="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DTB Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind 配置 -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#36CFC9',
            accent: '#FF7D00',
            neutral: '#F5F7FA',
            dark: '#1D2129',
            usedCar: '#FF6B35',
            usedCarLight: '#FF8C42',
            usedCarDark: '#E55A2B',
            newEnergy: '#22C55E',
            newEnergyLight: '#4ADE80',
            newEnergyDark: '#16A34A',
          },
          fontFamily: {
            inter: ['Inter', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    :root {
      --primary-color: #165DFF;
      --primary-color-rgb: 22, 93, 255;
      --secondary-color: #36CFC9;
      --accent-color: #FF7D00;
      --bg-primary: #ffffff;
      --bg-secondary: #ffffff;
      --bg-tertiary: #f9fafb;
      --text-primary: #111827;
      --text-secondary: #374151;
      --text-tertiary: #6b7280;
      --border-color: #d1d5db;
      --shadow-color: rgba(0, 0, 0, 0.1);
    }
    
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .card-shadow {
        box-shadow: 0 10px 30px -5px var(--shadow-color);
      }
      .input-focus {
        @apply focus:ring-2 focus:ring-primary/20 focus:outline-none;
        border-color: var(--border-color);
      }
      .input-focus:focus {
        border-color: var(--primary-color);
      }
      .transition-custom {
        @apply transition-all duration-300 ease-in-out;
      }
      .animate-fadeIn {
        animation: fadeIn 0.5s ease-in-out;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      .text-primary {
        color: var(--primary-color) !important;
      }
      .bg-primary {
        background-color: var(--primary-color) !important;
      }
      .border-primary {
        border-color: var(--primary-color) !important;
      }
      .hover\:bg-primary:hover {
        background-color: var(--primary-color) !important;
      }
      .focus\:border-primary:focus {
        border-color: var(--primary-color) !important;
      }
      .focus\:ring-primary\/20:focus {
        --tw-ring-color: var(--primary-color);
        --tw-ring-opacity: 0.2;
      }
      
      input[type="range"] {
        accent-color: var(--primary-color);
      }
      input[type="radio"] {
        accent-color: var(--primary-color);
      }
      
      input[type="number"]::-webkit-outer-spin-button,
      input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type="number"] {
        -moz-appearance: textfield;
      }
    }
    
    .quote-type-radio {
      appearance: none;
      -webkit-appearance: none;
      width: 1.25em;
      height: 1.25em;
      border: 2px solid #d1d5db;
      border-radius: 50%;
      background: #fff;
      position: relative;
      vertical-align: middle;
      margin-right: 0.5em;
      outline: none;
      cursor: pointer;
      transition: border-color 0.2s;
      box-sizing: border-box;
    }
    .quote-type-radio:checked {
      border-color: var(--primary-color);
    }
    .quote-type-radio:checked::after {
      content: '';
      display: block;
      width: 0.65em;
      height: 0.65em;
      background: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      top: 0.18em;
      left: 0.18em;
    }
    .quote-type-radio:focus {
      box-shadow: 0 0 0 2px var(--primary-color, #165DFF33);
    }
    
    .export-type-group {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }
    .export-type-group .export-type-btn {
      flex: 1 1 0%;
      min-width: 0;
      max-width: 100%;
      text-align: center;
    }
    @media (max-width: 640px) {
      .export-type-group {
        gap: 8px;
      }
      .export-type-group .export-type-btn {
        flex: 1 1 100%;
        min-width: 100px;
        max-width: 100%;
        margin: 0 auto;
      }
    }
    
    .quote-type-group {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }
    .quote-type-group label {
      flex: 1 1 0%;
      min-width: 0;
      max-width: 100%;
      text-align: center;
    }
    @media (max-width: 640px) {
      .quote-type-group {
        gap: 8px;
      }
      .quote-type-group label {
        flex: 1 1 100%;
        min-width: 100px;
        max-width: 100%;
        margin: 0 auto;
      }
    }
    
    .tax-fee-card .space-y-2 {
      display: block;
      gap: 0;
      align-items: unset;
    }
    .tax-fee-card .space-y-2 label,
    .tax-fee-card .space-y-2 input {
      max-width: 100%;
      width: 100%;
      display: block;
    }
    
    .search-card {
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      z-index: 1;
    }
    
    .search-card .relative {
      z-index: 99999 !important;
    }
    
    .search-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
      border-color: var(--primary-color);
    }
    
    .search-card:active {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    }
    
    .card-hover {
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      z-index: 1;
    }
    
    .card-hover,
    .bg-gray-50.p-6.rounded-lg.border.border-gray-200 {
      z-index: 1 !important;
    }
    
    .card-hover:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
      border-color: var(--primary-color);
    }
    
    .card-hover:active {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    }
    
    .card-float {
      animation: cardFloat 0.6s ease-out;
    }
    
    @keyframes cardFloat {
      0% {
        transform: translateY(0);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      50% {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(22, 93, 255, 0.3);
      }
      100% {
        transform: translateY(-4px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
      }
    }
  </style>
</head>

<body class="font-inter bg-gray-50 text-dark min-h-screen transition-custom" id="mainBody" data-theme="light">
  <!-- 顶部导航 -->
  <header class="bg-white shadow-sm sticky top-0 z-50 transition-custom">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <i class="fa fa-rocket text-primary text-2xl"></i>
        <h1 class="text-[clamp(1.25rem,3vw,1.75rem)] font-bold text-dark">DTB Calculator</h1>
      </div>
    </div>
  </header>

  <!-- 主要内容区 -->
  <main class="container mx-auto px-4 py-8">
    <!-- 表单卡片 -->
    <div class="bg-white rounded-xl shadow-md p-6 md:p-8 mb-8">
      <form id="carQuoteForm" class="space-y-8">
        <!-- 搜索卡片 -->
        <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 mb-6 flex flex-col items-start shadow-sm search-card" style="z-index: 99999;">
          <div class="flex w-full gap-4 items-end">
            <div class="flex-1 min-w-0">
              <div class="mb-2 text-lg font-semibold text-gray-700 flex items-center justify-between">
                <div class="flex items-center">
                  <i class="fa fa-search text-primary mr-2"></i>搜索车型
                </div>
                <button 
                  type="button" 
                  id="showHistoryBtn" 
                  class="text-sm text-primary hover:text-primary/80 transition-colors flex items-center"
                  title="查看搜索历史"
                >
                  <i class="fa fa-history mr-1"></i>历史记录
                </button>
              </div>
              <div class="relative" style="z-index: 99999;">
                <input type="text" id="searchCarInput" class="w-full h-12 px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="输入车型名称进行搜索">
              </div>
            </div>
          </div>
        </div>

        <!-- 基础信息部分 -->
        <section id="baseInfoSection" class="mb-6 hidden">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- 基础信息卡片 -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 card-hover">
              <h3 class="text-lg font-medium flex items-center mb-3">
                <i class="fa fa-info-circle text-primary mr-2"></i>基础信息
              </h3>
              <div class="grid grid-cols-1 gap-3">
                <div>
                  <div class="text-sm font-medium text-gray-700 mb-1">厂商/级别</div>
                  <div class="flex items-center gap-3">
                    <div id="brandLogoBox2" class="w-12 h-12 flex items-center justify-center"></div>
                    <input type="text" id="brandName2" class="w-full h-12 px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="厂商/级别" readonly>
                  </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <div class="text-sm font-medium text-gray-700 mb-1">车型</div>
                    <input type="text" id="carModel2" class="w-full h-12 px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="车型名称" readonly>
                  </div>
                  <div>
                    <div class="text-sm font-medium text-gray-700 mb-1">能源类型</div>
                    <input type="text" id="fuelType2" class="w-full h-12 px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="能源类型" readonly>
                  </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <div class="text-sm font-medium text-gray-700 mb-1">尺寸</div>
                    <input type="text" id="size2" class="w-full h-12 px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="尺寸" readonly>
                  </div>
                  <div>
                    <div class="text-sm font-medium text-gray-700 mb-1">指导价</div>
                    <input type="text" id="price2" class="w-full h-12 px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="指导价" readonly>
                  </div>
                </div>
              </div>
            </div>
            <!-- 车型图片卡片 -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 card-hover">
              <h3 class="text-lg font-medium flex items-center mb-3">
                <i class="fa fa-car text-primary mr-2"></i>车型图片
              </h3>
              <div id="carMainImageBox" class="h-64 flex items-center justify-center">
                <!-- 车型图片自动加载 -->
              </div>
            </div>
          </div>
        </section>

        <!-- 出口类型与报价类型卡片并排 -->
        <div class="flex flex-col md:flex-row gap-4 mb-8">
          <!-- 出口类型卡片 -->
          <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 w-full md:w-1/2">
            <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
              <i class="fa fa-ship text-primary mr-2"></i>出口类型
            </h4>
            <div class="flex gap-4 export-type-group">
              <button type="button" class="export-type-btn h-14 flex items-center justify-center px-6 py-2 rounded-lg font-medium border border-primary text-primary bg-white shadow-sm transition-custom" data-type="new">
                <i class="fa fa-car mr-2"></i>新车
              </button>
              <button type="button" class="export-type-btn h-14 flex items-center justify-center px-6 py-2 rounded-lg font-medium border border-gray-300 text-gray-700 bg-white shadow-sm transition-custom" data-type="used">
                <i class="fa fa-refresh mr-2"></i>二手车
              </button>
              <button type="button" class="export-type-btn h-14 flex items-center justify-center px-6 py-2 rounded-lg font-medium border border-gray-300 text-gray-700 bg-white shadow-sm transition-custom" data-type="newEnergyTax">
                <i class="fa fa-leaf mr-2"></i>新能源车
              </button>
            </div>
          </div>
          <!-- 报价类型卡片 -->
          <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 w-full md:w-1/2">
            <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
              <i class="fa fa-cog text-primary mr-2"></i>报价类型
            </h4>
            <div class="flex gap-4 quote-type-group">
              <label class="inline-flex items-center h-14 justify-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:border-primary transition-custom flex-1">
                <input type="radio" name="globalQuoteType" value="EXW" class="quote-type-radio text-primary focus:ring-primary" checked>
                <span class="ml-2">EXW</span>
              </label>
              <label class="inline-flex items-center h-14 justify-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:border-primary transition-custom flex-1">
                <input type="radio" name="globalQuoteType" value="FOB" class="quote-type-radio text-primary focus:ring-primary">
                <span class="ml-2">FOB</span>
              </label>
              <label class="inline-flex items-center h-14 justify-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:border-primary transition-custom flex-1">
                <input type="radio" name="globalQuoteType" value="CIF" class="quote-type-radio text-primary focus:ring-primary">
                <span class="ml-2">CIF</span>
              </label>
            </div>
          </div>
        </div>
        
        <!-- 新车表单 (默认显示) -->
        <section id="newCarForm" class="space-y-8">
          <!-- 这里包含新车表单的完整HTML结构 -->
          <!-- 为了简化，这里只显示一个示例卡片 -->
          <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
            <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
              <i class="fa fa-tag text-primary mr-2"></i>新车表单
            </h4>
            <p class="text-gray-600">新车表单内容将在这里显示</p>
          </div>
        </section>
        
        <!-- 二手车表单 (默认隐藏) -->
        <section id="usedCarForm" class="hidden space-y-8">
          <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
            <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
              <i class="fa fa-refresh text-primary mr-2"></i>二手车表单
            </h4>
            <p class="text-gray-600">二手车表单内容将在这里显示</p>
          </div>
        </section>
        
        <!-- 新能源表单 (默认隐藏) -->
        <section id="newEnergyForm" class="hidden space-y-8">
          <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
            <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
              <i class="fa fa-leaf text-primary mr-2"></i>新能源表单
            </h4>
            <p class="text-gray-600">新能源表单内容将在这里显示</p>
          </div>
        </section>
      </form>
    </div>
  </main>
  
  <!-- 搜索下拉菜单 -->
  <div id="searchCarResults" class="hidden fixed z-[999999] max-h-60 overflow-y-auto border border-gray-200 rounded-lg bg-white shadow-lg"></div>
  
  <!-- 搜索历史记录面板 -->
  <div id="searchHistoryPanel" class="hidden fixed z-[999999] max-h-60 overflow-y-auto border border-gray-200 rounded-lg bg-white shadow-lg">
    <div class="p-3 border-b border-gray-100">
      <div class="flex items-center justify-between">
        <h4 class="text-sm font-medium text-gray-700">搜索历史</h4>
        <button 
          type="button" 
          id="clearHistoryBtn" 
          class="text-xs text-red-500 hover:text-red-700 transition-colors"
          title="清除所有历史记录"
        >
          <i class="fa fa-trash mr-1"></i>清除历史
        </button>
      </div>
    </div>
    <div id="searchHistoryList" class="max-h-48 overflow-y-auto">
      <!-- 历史记录项将在这里动态生成 -->
    </div>
    <div id="noHistoryMessage" class="hidden p-4 text-center text-gray-500 text-sm">
      <i class="fa fa-info-circle mr-1"></i>暂无搜索历史
    </div>
  </div>

  <!-- 页脚 -->
  <footer class="bg-white shadow-sm py-8 transition-custom">
    <div class="container mx-auto px-4">
      <div class="text-center text-gray-500 text-sm">
        Designed by DTBKnight
      </div>
    </div>
  </footer>

  <!-- 模块化JavaScript -->
  <script type="module" src="js/app.js"></script>
</body>
</html> 