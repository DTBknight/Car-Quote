<!DOCTYPE html>
<html lang="zh-CN" class="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DTB Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind é…ç½® -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#36CFC9',
            accent: '#FF7D00',
            neutral: '#F5F7FA',
            dark: '#1D2129',
            // äºŒæ‰‹è½¦ä¸»é¢˜è‰² - æ©™è‰²ä¸»é¢˜
            usedCar: '#FF6B35',
            usedCarLight: '#FF8C42',
            usedCarDark: '#E55A2B',
            // æ–°èƒ½æºä¸»é¢˜è‰²
            newEnergy: '#22C55E',
            newEnergyLight: '#4ADE80',
            newEnergyDark: '#16A34A',
          },
          fontFamily: {
            inter: ['Inter', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    :root {
      --primary-color: #165DFF;
      --primary-color-rgb: 22, 93, 255;
      --secondary-color: #36CFC9;
      --accent-color: #FF7D00;
      
      /* æµ…è‰²ä¸»é¢˜å˜é‡ */
      --bg-primary: #ffffff;
      --bg-secondary: #ffffff;
      --bg-tertiary: #f9fafb;
      --text-primary: #111827;
      --text-secondary: #374151;
      --text-tertiary: #6b7280;
      --border-color: #d1d5db;
      --shadow-color: rgba(0, 0, 0, 0.1);
    }
    
    /* æ·±è‰²ä¸»é¢˜å˜é‡ */
    [data-theme="dark"],
    [data-theme="dark"] :root {
      --bg-primary: #1f2937;
      --bg-secondary: #111827;
      --bg-tertiary: #374151;
      --text-primary: #f9fafb;
      --text-secondary: #d1d5db;
      --text-tertiary: #9ca3af;
      --border-color: #4b5563;
      --shadow-color: rgba(0, 0, 0, 0.3);
    }
    
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .card-shadow {
        box-shadow: 0 10px 30px -5px var(--shadow-color);
      }
      .input-focus {
        @apply focus:ring-2 focus:ring-primary/20 focus:outline-none;
        border-color: var(--border-color);
      }
      .input-focus:focus {
        border-color: var(--primary-color);
      }
      .transition-custom {
        @apply transition-all duration-300 ease-in-out;
      }
      .animate-fadeIn {
        animation: fadeIn 0.5s ease-in-out;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      /* ä¸»é¢˜åˆ‡æ¢åŠ¨ç”» */
      .theme-transitioning {
        opacity: 0.8;
        transition: opacity 0.15s ease-in-out;
      }
      
      /* äºŒæ‰‹è½¦ä¸»é¢˜æ ·å¼ */
      .used-car-theme .card-shadow {
        box-shadow: 0 10px 30px -5px rgba(255, 107, 53, 0.1);
      }
      .used-car-theme .input-focus {
        @apply focus:border-usedCar focus:ring-2 focus:ring-usedCar/20 focus:outline-none;
      }
      
      /* æ–°èƒ½æºä¸»é¢˜æ ·å¼ */
      .new-energy-theme .card-shadow {
        box-shadow: 0 10px 30px -5px rgba(34, 197, 94, 0.1);
      }
      .new-energy-theme .input-focus {
        @apply focus:border-newEnergy focus:ring-2 focus:ring-newEnergy/20 focus:outline-none;
      }
      
      /* åŠ¨æ€ä¸»é¢˜é¢œè‰² */
      .text-primary {
        color: var(--primary-color) !important;
      }
      .bg-primary {
        background-color: var(--primary-color) !important;
      }
      .border-primary {
        border-color: var(--primary-color) !important;
      }
      .hover\:bg-primary:hover {
        background-color: var(--primary-color) !important;
      }
      .focus\:border-primary:focus {
        border-color: var(--primary-color) !important;
      }
      .focus\:ring-primary\/20:focus {
        --tw-ring-color: var(--primary-color);
        --tw-ring-opacity: 0.2;
      }
      
      /* æ·±è‰²ä¸»é¢˜æ ·å¼è¦†ç›– */
      [data-theme="dark"] body {
        background-color: var(--bg-secondary) !important;
      }
      [data-theme="dark"] body.bg-gray-50 {
        background-color: var(--bg-secondary) !important;
      }
      
      /* Tailwind æš—è‰²æ¨¡å¼æ”¯æŒ */
      .dark body {
        background-color: #111827 !important;
      }
      .dark body.bg-gray-50 {
        background-color: #111827 !important;
      }
      [data-theme="dark"] .bg-white {
        background-color: var(--bg-primary) !important;
      }
      [data-theme="dark"] .bg-gray-50 {
        background-color: var(--bg-secondary) !important;
      }
      [data-theme="dark"] .bg-gray-100 {
        background-color: var(--bg-tertiary) !important;
      }
      [data-theme="dark"] input.bg-gray-50 {
        background-color: var(--bg-secondary) !important;
      }
      [data-theme="dark"] .text-dark {
        color: var(--text-primary) !important;
      }
      [data-theme="dark"] .text-gray-700 {
        color: var(--text-secondary) !important;
      }
      [data-theme="dark"] .text-gray-600 {
        color: var(--text-tertiary) !important;
      }
      [data-theme="dark"] .text-gray-500 {
        color: var(--text-tertiary) !important;
      }
      [data-theme="dark"] .text-gray-600 {
        color: var(--text-secondary) !important;
      }
      [data-theme="dark"] .text-gray-700 {
        color: var(--text-secondary) !important;
      }
      [data-theme="dark"] .border-gray-200 {
        border-color: var(--border-color) !important;
      }
      [data-theme="dark"] .border-gray-300 {
        border-color: var(--border-color) !important;
      }
      [data-theme="dark"] .border-gray-100 {
        border-color: var(--border-color) !important;
      }
      [data-theme="dark"] input[type="text"],
      [data-theme="dark"] input[type="number"],
      [data-theme="dark"] select {
        background-color: var(--bg-primary) !important;
        color: var(--text-primary) !important;
        border-color: var(--border-color) !important;
      }
      [data-theme="dark"] input[readonly] {
        background-color: var(--bg-secondary) !important;
      }
      [data-theme="dark"] .bg-gray-100 {
        background-color: var(--bg-tertiary) !important;
      }
      [data-theme="dark"] .hover\:bg-gray-200:hover {
        background-color: var(--bg-secondary) !important;
      }
      [data-theme="dark"] .hover\:bg-gray-100:hover {
        background-color: var(--bg-tertiary) !important;
      }
      [data-theme="dark"] .shadow-sm {
        box-shadow: 0 1px 2px 0 var(--shadow-color) !important;
      }
      [data-theme="dark"] .shadow-md {
        box-shadow: 0 4px 6px -1px var(--shadow-color) !important;
      }
      [data-theme="dark"] .shadow-lg {
        box-shadow: 0 10px 15px -3px var(--shadow-color) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - æœ€ç»ˆæŠ¥ä»·å¡ç‰‡æ ·å¼ */
      [data-theme="dark"] .bg-primary\/10 {
        background-color: rgba(var(--primary-color-rgb), 0.15) !important;
      }
      [data-theme="dark"] .border-primary\/20 {
        border-color: rgba(var(--primary-color-rgb), 0.3) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - è¡¨å•å’Œå¡ç‰‡æ ·å¼ */
      [data-theme="dark"] .bg-white {
        background-color: var(--bg-primary) !important;
      }
      [data-theme="dark"] .rounded-xl {
        background-color: var(--bg-primary) !important;
      }
      [data-theme="dark"] .border-b {
        border-bottom-color: var(--border-color) !important;
      }
      [data-theme="dark"] .pb-6 {
        border-bottom-color: var(--border-color) !important;
      }
      [data-theme="dark"] .space-y-8 > * + * {
        border-top-color: var(--border-color) !important;
      }
      [data-theme="dark"] section.border-b {
        border-bottom-color: var(--border-color) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - æ ‡ç­¾å’Œæ–‡å­— */
      [data-theme="dark"] label {
        color: var(--text-secondary) !important;
      }
      [data-theme="dark"] .text-xl {
        color: var(--text-primary) !important;
      }
      [data-theme="dark"] .text-lg {
        color: var(--text-secondary) !important;
      }
      [data-theme="dark"] .text-sm {
        color: var(--text-secondary) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - å ä½ç¬¦æ–‡å­— */
      [data-theme="dark"] input::placeholder {
        color: var(--text-tertiary) !important;
      }
      [data-theme="dark"] select::placeholder {
        color: var(--text-tertiary) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - é€‰é¡¹æ–‡å­— */
      [data-theme="dark"] option {
        background-color: var(--bg-primary) !important;
        color: var(--text-primary) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - æœç´¢ç»“æœ */
      [data-theme="dark"] #carSearchResults {
        background-color: var(--bg-primary) !important;
        border-color: var(--border-color) !important;
      }
      [data-theme="dark"] #carSearchResults .border-b {
        border-bottom-color: var(--border-color) !important;
      }
      [data-theme="dark"] #carSearchResults .hover\:bg-gray-50:hover {
        background-color: var(--bg-secondary) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - æœç´¢å†å²è®°å½• */
      [data-theme="dark"] #searchHistoryPanel {
        background-color: var(--bg-primary) !important;
        border-color: var(--border-color) !important;
      }
      [data-theme="dark"] #searchHistoryPanel .border-b {
        border-bottom-color: var(--border-color) !important;
      }
      [data-theme="dark"] #searchHistoryPanel .hover\:bg-gray-50:hover {
        background-color: var(--bg-secondary) !important;
      }
      [data-theme="dark"] #searchHistoryPanel .text-gray-700 {
        color: var(--text-secondary) !important;
      }
      [data-theme="dark"] #searchHistoryPanel .text-gray-400 {
        color: var(--text-tertiary) !important;
      }
      [data-theme="dark"] #searchHistoryPanel .text-gray-500 {
        color: var(--text-tertiary) !important;
      }
      [data-theme="dark"] #searchHistoryPanel .text-sm {
        color: var(--text-secondary) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - å•é€‰æŒ‰é’®æ ‡ç­¾ */
      [data-theme="dark"] .inline-flex.items-center {
        border-color: var(--border-color) !important;
      }
      [data-theme="dark"] .inline-flex.items-center:hover {
        border-color: var(--primary-color) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - é¡µè„š */
      [data-theme="dark"] footer {
        background-color: var(--bg-primary) !important;
      }
      [data-theme="dark"] footer .text-gray-500 {
        color: var(--text-secondary) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - ç»“æœå¡ç‰‡ */
      [data-theme="dark"] #resultCard {
        background-color: var(--bg-primary) !important;
      }
      [data-theme="dark"] #resultCard .border-b {
        border-bottom-color: var(--border-color) !important;
      }
      [data-theme="dark"] #resultCard .border-r {
        border-right-color: var(--border-color) !important;
      }
      [data-theme="dark"] #resultCard .border-t {
        border-top-color: var(--border-color) !important;
      }
      [data-theme="dark"] #resultCard .bg-gray-50 {
        background-color: var(--bg-secondary) !important;
      }
      [data-theme="dark"] #resultCard .bg-primary\/10 {
        background-color: rgba(var(--primary-color-rgb), 0.1) !important;
      }
      [data-theme="dark"] #resultCard .border-primary\/20 {
        border-color: rgba(var(--primary-color-rgb), 0.2) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - ç»“æœå¡ç‰‡æ–‡å­— */
      [data-theme="dark"] #resultCard .text-gray-600 {
        color: var(--text-tertiary) !important;
      }
      [data-theme="dark"] #resultCard .text-gray-500 {
        color: var(--text-tertiary) !important;
      }
      [data-theme="dark"] #resultCard .font-medium {
        color: var(--text-secondary) !important;
      }
      [data-theme="dark"] #resultCard .font-semibold {
        color: var(--text-primary) !important;
      }
      [data-theme="dark"] #resultCard .text-lg {
        color: var(--text-primary) !important;
      }
      [data-theme="dark"] #resultCard .text-primary {
        color: var(--primary-color) !important;
      }
      [data-theme="dark"] #resultCard .text-green-600 {
        color: #10b981 !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - ç»“æœå¡ç‰‡æ‰€æœ‰æ–‡å­—å…ƒç´  */
      [data-theme="dark"] #resultCard h3,
      [data-theme="dark"] #resultCard h4,
      [data-theme="dark"] #resultCard span,
      [data-theme="dark"] #resultCard div,
      [data-theme="dark"] #resultCard li {
        color: inherit !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - ç»“æœå¡ç‰‡ç‰¹å®šæ–‡å­—é¢œè‰² */
      [data-theme="dark"] #resultCard .text-gray-700 {
        color: var(--text-secondary) !important;
      }
      [data-theme="dark"] #resultCard .text-gray-600 {
        color: var(--text-tertiary) !important;
      }
      [data-theme="dark"] #resultCard .text-gray-500 {
        color: var(--text-tertiary) !important;
      }
      [data-theme="dark"] #resultCard .text-sm {
        color: var(--text-tertiary) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - æŠ¥ä»·æ±‡æ€»å¡ç‰‡ */
      [data-theme="dark"] #resultCard .bg-gray-50 {
        background-color: var(--bg-tertiary) !important;
      }
      [data-theme="dark"] #resultCard .bg-primary\/10 {
        background-color: rgba(var(--primary-color-rgb), 0.2) !important;
      }
      [data-theme="dark"] #resultCard .border-primary\/20 {
        border-color: rgba(var(--primary-color-rgb), 0.4) !important;
      }
      
      /* æ·±è‰²ä¸»é¢˜ - æŠ¥ä»·æ±‡æ€»å¡ç‰‡å¢å¼ºå¯¹æ¯”åº¦ */
      [data-theme="dark"] #resultCard .p-4.rounded-lg {
        background-color: var(--bg-tertiary) !important;
        border: 1px solid var(--border-color) !important;
      }
      [data-theme="dark"] #resultCard .bg-primary\/10.p-4.rounded-lg {
        background-color: rgba(var(--primary-color-rgb), 0.25) !important;
        border: 1px solid rgba(var(--primary-color-rgb), 0.5) !important;
      }
      
      /* æ»‘å—å’Œå•é€‰æŒ‰é’®é¢œè‰² */
      input[type="range"] {
        accent-color: var(--primary-color);
      }
      input[type="radio"] {
        accent-color: var(--primary-color);
      }
      
      /* å»æ‰æ‰€æœ‰æ•°å€¼è¾“å…¥æ¡†çš„ä¸Šä¸‹è°ƒèŠ‚æŒ‰é’® */
      input[type="number"]::-webkit-outer-spin-button,
      input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type="number"] {
        -moz-appearance: textfield;
      }
    }
    
    /* ====== ç¾åŒ–æŠ¥ä»·ç±»å‹å•é€‰æ¡† ====== */
    .quote-type-radio {
      appearance: none;
      -webkit-appearance: none;
      width: 1.25em;
      height: 1.25em;
      border: 2px solid #d1d5db;
      border-radius: 50%;
      background: #fff;
      position: relative;
      vertical-align: middle;
      margin-right: 0.5em;
      outline: none;
      cursor: pointer;
      transition: border-color 0.2s;
      box-sizing: border-box;
    }
    .quote-type-radio:checked {
      border-color: var(--primary-color);
    }
    .quote-type-radio:checked::after {
      content: '';
      display: block;
      width: 0.65em;
      height: 0.65em;
      background: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      top: 0.18em;
      left: 0.18em;
    }
    .quote-type-radio:focus {
      box-shadow: 0 0 0 2px var(--primary-color, #165DFF33);
    }
  </style>
  <style>
    /* ...åŸæœ‰æ ·å¼... */
    /* å‡ºå£ç±»å‹æŒ‰é’®ç»„ç­‰åˆ†å¸ƒå±€ï¼Œç§»åŠ¨ç«¯è‡ªåŠ¨æ¢è¡Œ */
    .export-type-group {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }
    .export-type-group .export-type-btn {
      flex: 1 1 0%;
      min-width: 0;
      max-width: 100%;
      text-align: center;
    }
    @media (max-width: 640px) {
      .export-type-group {
        gap: 8px;
      }
      .export-type-group .export-type-btn {
        flex: 1 1 100%;
        min-width: 100px;
        max-width: 100%;
        margin: 0 auto;
      }
    }
    /* æŠ¥ä»·ç±»å‹æŒ‰é’®ç»„ç­‰åˆ†å¸ƒå±€ï¼Œç§»åŠ¨ç«¯è‡ªåŠ¨æ¢è¡Œ */
    .quote-type-group {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }
    .quote-type-group label {
      flex: 1 1 0%;
      min-width: 0;
      max-width: 100%;
      text-align: center;
    }
    @media (max-width: 640px) {
      .quote-type-group {
        gap: 8px;
      }
      .quote-type-group label {
        flex: 1 1 100%;
        min-width: 100px;
        max-width: 100%;
        margin: 0 auto;
      }
    }
  </style>
  <!-- ç¨è´¹åŠæœåŠ¡è´¹ç”¨å¡ç‰‡å†…è¾“å…¥æ¡†å®½åº¦ä¸åŸºç¡€ä¿¡æ¯ä¸€è‡´ï¼Œæ•´ä½“æ›´ç´§å‡‘ -->
  <style>
    .tax-fee-card .space-y-2 label,
    .tax-fee-card .space-y-2 input {
      width: 100%;
      max-width: 180px;
      display: inline-block;
    }
    .tax-fee-card .space-y-2 {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    @media (max-width: 768px) {
      .tax-fee-card .space-y-2 label,
      .tax-fee-card .space-y-2 input {
        max-width: 100%;
      }
      .tax-fee-card .space-y-2 {
        flex-direction: column;
        align-items: flex-start;
        gap: 2px;
      }
    }
  </style>
  <style>
    /* ...åŸæœ‰æ ·å¼... */
    /* ç§»é™¤ç¨è´¹å¡ç‰‡å†…æ¨ªå‘flexï¼Œæ¢å¤çºµå‘å †å  */
    .tax-fee-card .space-y-2 {
      display: block;
      gap: 0;
      align-items: unset;
    }
    .tax-fee-card .space-y-2 label,
    .tax-fee-card .space-y-2 input {
      max-width: 100%;
      width: 100%;
      display: block;
    }
    
    /* æœç´¢å¡ç‰‡ç‰¹æ®Šæ ·å¼ - ä¸åŒ…å«overflow hidden */
    .search-card {
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      z-index: 1;
    }
    
    /* ç¡®ä¿æœç´¢å¡ç‰‡çš„ä¸‹æ‹‰èœå•å§‹ç»ˆåœ¨æœ€é¡¶å±‚ */
    .search-card .relative {
      z-index: 99999 !important;
    }
    
    .search-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
      border-color: var(--primary-color);
    }
    
    .search-card:active {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    }
    
    /* å¡ç‰‡æ‚¬æµ®æ•ˆæœ */
    .card-hover {
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      z-index: 1;
    }
    
    /* ç¡®ä¿æ‰€æœ‰å…¶ä»–å¡ç‰‡çš„z-indexéƒ½å¾ˆä½ï¼Œä¸å¹²æ‰°æœç´¢ */
    .card-hover,
    .bg-gray-50.p-6.rounded-lg.border.border-gray-200 {
      z-index: 1 !important;
    }
    
    .card-hover:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
      border-color: var(--primary-color);
    }
    
    .card-hover:active {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    }
    
    /* å¡ç‰‡ç‚¹å‡»æ‚¬æµ®åŠ¨ç”» */
    .card-float {
      animation: cardFloat 0.6s ease-out;
    }
    
    @keyframes cardFloat {
      0% {
        transform: translateY(0);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      50% {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(22, 93, 255, 0.3);
      }
      100% {
        transform: translateY(-4px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
      }
    }
    
    /* æ·±è‰²æ¨¡å¼å¡ç‰‡æ‚¬æµ®æ•ˆæœ */
    [data-theme="dark"] .card-hover:hover {
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
      border-color: var(--primary-color);
    }
    
    [data-theme="dark"] .card-float {
      animation: darkCardFloat 0.6s ease-out;
    }
    
    @keyframes darkCardFloat {
      0% {
        transform: translateY(0);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      }
      50% {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(22, 93, 255, 0.4);
      }
      100% {
        transform: translateY(-4px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
      }
    }
  </style>
</head>

<body class="font-inter bg-gray-50 text-dark min-h-screen transition-custom" id="mainBody" data-theme="light">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <header class="bg-white shadow-sm sticky top-0 z-50 transition-custom">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <i class="fa fa-calculator text-primary text-2xl"></i>
        <h1 class="text-[clamp(1.25rem,3vw,1.75rem)] font-bold text-dark">DTB Calculator</h1>
      </div>
      <!-- é»‘å¤œæ¨¡å¼æŒ‰é’®å·²éšè— -->
    </div>
  </header>

  <!-- ä¸»è¦å†…å®¹åŒº -->
  <main class="container mx-auto px-4 py-8">
    <!-- è¡¨å•å¡ç‰‡ -->
    <div class="bg-white rounded-xl shadow-md p-6 md:p-8 mb-8">
      <form id="carQuoteForm" class="space-y-8">
        <!-- æ–°å¢ï¼šåŸºç¡€ä¿¡æ¯å¡ç‰‡ä¸Šæ–¹çš„ç°è‰²å¡ç‰‡ï¼Œæ ·å¼ä¸å‡ºå£ç±»å‹ã€æŠ¥ä»·ç±»å‹å¡ç‰‡ä¸€è‡´ -->
        <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 mb-6 flex flex-col items-start shadow-sm search-card" style="z-index: 99999;">
          <!-- æ–°å¢å“ç‰Œæœç´¢ -->
          <div class="flex w-full gap-4 items-end">
            <!-- åªä¿ç•™è½¦å‹æœç´¢æ  -->
            <div class="flex-1 min-w-0">
              <div class="mb-2 text-lg font-semibold text-gray-700 flex items-center justify-between">
                <div class="flex items-center">
                  <i class="fa fa-search text-primary mr-2"></i>æœç´¢è½¦å‹
                </div>
                <!-- æœç´¢å†å²æŒ‰é’® -->
                <button 
                  type="button" 
                  id="showHistoryBtn" 
                  class="text-sm text-primary hover:text-primary/80 transition-colors flex items-center"
                  title="æŸ¥çœ‹æœç´¢å†å²"
                >
                  <i class="fa fa-history mr-1"></i>å†å²è®°å½•
                </button>
              </div>
              <div class="relative" style="z-index: 99999;">
                <input type="text" id="searchCarInput" class="w-full h-12 px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥è½¦å‹åç§°è¿›è¡Œæœç´¢">
              </div>
            </div>
          </div>
        </div>
                  <!-- åŸºç¡€ä¿¡æ¯éƒ¨åˆ† -->
          <section id="baseInfoSection" class="mb-6 hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- åŸºç¡€ä¿¡æ¯å¡ç‰‡ -->
              <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 card-hover">
              <h3 class="text-lg font-medium flex items-center mb-3">
                <i class="fa fa-info-circle text-primary mr-2"></i>åŸºç¡€ä¿¡æ¯
              </h3>
              <div class="grid grid-cols-1 gap-3">
                <!-- ç¬¬ä¸€è¡Œï¼šå‚å•†/çº§åˆ« -->
                <div>
                  <div class="text-sm font-medium text-gray-700 mb-1">å‚å•†/çº§åˆ«</div>
                  <div class="flex items-center gap-3">
                    <div id="brandLogoBox2" class="w-12 h-12 flex items-center justify-center"></div>
                    <input type="text" id="brandName2" class="w-full h-12 px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="å‚å•†/çº§åˆ«" readonly>
                  </div>
                </div>
                <!-- ç¬¬äºŒè¡Œï¼šè½¦å‹å’Œèƒ½æºç±»å‹å¹¶åˆ— -->
                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <div class="text-sm font-medium text-gray-700 mb-1">è½¦å‹</div>
                    <input type="text" id="carModel2" class="w-full h-12 px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è½¦å‹åç§°" readonly>
                  </div>
                  <div>
                    <div class="text-sm font-medium text-gray-700 mb-1">èƒ½æºç±»å‹</div>
                    <input type="text" id="fuelType2" class="w-full h-12 px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="èƒ½æºç±»å‹" readonly>
                  </div>
                </div>
                <!-- ç¬¬ä¸‰è¡Œï¼šå°ºå¯¸å’ŒæŒ‡å¯¼ä»·å¹¶åˆ— -->
                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <div class="text-sm font-medium text-gray-700 mb-1">å°ºå¯¸</div>
                    <input type="text" id="size2" class="w-full h-12 px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="å°ºå¯¸" readonly>
                  </div>
                  <div>
                    <div class="text-sm font-medium text-gray-700 mb-1">æŒ‡å¯¼ä»·</div>
                    <input type="text" id="price2" class="w-full h-12 px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="æŒ‡å¯¼ä»·" readonly>
                  </div>
                </div>
              </div>
            </div>
                          <!-- è½¦å‹å›¾ç‰‡å¡ç‰‡ -->
              <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 card-hover">
              <h3 class="text-lg font-medium flex items-center mb-3">
                <i class="fa fa-car text-primary mr-2"></i>è½¦å‹å›¾ç‰‡
              </h3>
              <div id="carMainImageBox" class="h-64 flex items-center justify-center">
                <!-- è½¦å‹å›¾ç‰‡è‡ªåŠ¨åŠ è½½ -->
              </div>
            </div>
          </div>
        </section>
        <!-- å‡ºå£ç±»å‹ä¸æŠ¥ä»·ç±»å‹å¡ç‰‡å¹¶æ’ -->
        <div class="flex flex-col md:flex-row gap-4 mb-8">
          <!-- å‡ºå£ç±»å‹å¡ç‰‡ -->
          <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 w-full md:w-1/2">
            <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
              <i class="fa fa-ship text-primary mr-2"></i>å‡ºå£ç±»å‹
            </h4>
            <div class="flex gap-4 export-type-group">
              <button type="button" class="export-type-btn h-14 flex items-center justify-center px-6 py-2 rounded-lg font-medium border border-primary text-primary bg-white shadow-sm transition-custom" data-type="new">
                <i class="fa fa-car mr-2"></i>æ–°è½¦
              </button>
              <button type="button" class="export-type-btn h-14 flex items-center justify-center px-6 py-2 rounded-lg font-medium border border-gray-300 text-gray-700 bg-white shadow-sm transition-custom" data-type="used">
                <i class="fa fa-refresh mr-2"></i>äºŒæ‰‹è½¦
              </button>
              <button type="button" class="export-type-btn h-14 flex items-center justify-center px-6 py-2 rounded-lg font-medium border border-gray-300 text-gray-700 bg-white shadow-sm transition-custom" data-type="newEnergyTax">
                <i class="fa fa-leaf mr-2"></i>æ–°èƒ½æºè½¦
              </button>
            </div>
          </div>
          <!-- æŠ¥ä»·ç±»å‹å¡ç‰‡ -->
          <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 w-full md:w-1/2">
            <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
              <i class="fa fa-dollar text-primary mr-2"></i>æŠ¥ä»·ç±»å‹
            </h4>
            <div class="flex gap-4 quote-type-group">
              <label class="inline-flex items-center h-14 justify-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:border-primary transition-custom flex-1">
                <input type="radio" name="globalQuoteType" value="EXW" class="quote-type-radio text-primary focus:ring-primary" checked>
                <span class="ml-2">EXW</span>
              </label>
              <label class="inline-flex items-center h-14 justify-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:border-primary transition-custom flex-1">
                <input type="radio" name="globalQuoteType" value="FOB" class="quote-type-radio text-primary focus:ring-primary">
                <span class="ml-2">FOB</span>
              </label>
              <label class="inline-flex items-center h-14 justify-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:border-primary transition-custom flex-1">
                <input type="radio" name="globalQuoteType" value="CIF" class="quote-type-radio text-primary focus:ring-primary">
                <span class="ml-2">CIF</span>
              </label>
            </div>
          </div>
        </div>
        
        <!-- æ–°è½¦è¡¨å• (é»˜è®¤æ˜¾ç¤º) -->
        <section id="newCarForm" class="space-y-8">
          <!-- ç¬¬ä¸€æ’ï¼šå‡ºå£ç±»å‹ã€æŠ¥ä»·ç±»å‹ -->
          <!-- åˆ é™¤ä¸‹æ–¹é‡å¤çš„å‡ºå£ç±»å‹å’ŒæŠ¥ä»·ç±»å‹å¡ç‰‡ï¼Œåªä¿ç•™å…¨å±€å”¯ä¸€çš„é‚£ä¸€ç»„ -->
          <!-- ç¬¬äºŒæ’ï¼šä»·æ ¼ä¿¡æ¯ã€ç¨è´¹ä¿¡æ¯ã€è¿è¾“è´¹ç”¨ -->
          <div class="grid md:grid-cols-3 gap-4">
            <!-- ä»·æ ¼ä¿¡æ¯å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-tag text-primary mr-2"></i>ä»·æ ¼ä¿¡æ¯
              </h4>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- æŒ‡å¯¼ä»· -->
                <div class="space-y-2">
                  <label for="guidePrice" class="block text-sm font-medium text-gray-700">æŒ‡å¯¼ä»· (å…ƒ)</label>
                  <input type="number" id="guidePrice" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥æŒ‡å¯¼ä»·" step="0.01" min="0">
                </div>
                <!-- ä¼˜æƒ  -->
                <div class="space-y-2">
                  <label for="discount" class="block text-sm font-medium text-gray-700">ä¼˜æƒ  (å…ƒ)</label>
                  <input type="number" id="discount" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥ä¼˜æƒ é‡‘é¢" step="0.01" min="0">
                </div>
                <!-- é€‰è£… -->
                <div class="space-y-2">
                  <label for="optionalEquipment" class="block text-sm font-medium text-gray-700">é€‰è£… (å…ƒ)</label>
                  <input type="number" id="optionalEquipment" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥é€‰è£…è´¹ç”¨" step="0.01" min="0" value="0">
                </div>
                <!-- äº¤å¼ºé™© -->
                <div class="space-y-2">
                  <label for="compulsoryInsurance" class="block text-sm font-medium text-gray-700">äº¤å¼ºé™© (å…ƒ)</label>
                  <input type="number" id="compulsoryInsurance" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥äº¤å¼ºé™©è´¹ç”¨" step="0.01" min="0" value="0">
                </div>
                <!-- å¼€ç¥¨ä»· -->
                <div class="space-y-2 md:col-span-2">
                  <label for="invoicePrice" class="block text-sm font-medium text-gray-700">å¼€ç¥¨ä»· (å…ƒ)</label>
                  <input type="number" id="invoicePrice" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
              </div>
            </div>
            <!-- ç¨è´¹ä¿¡æ¯å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 tax-fee-card">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-calculator text-primary mr-2"></i>ç¨è´¹ä¿¡æ¯
              </h4>
              <div class="grid grid-cols-1 gap-6">
                <div class="space-y-2">
                  <label for="serviceFeeRate" class="block text-sm font-medium text-gray-700 text-left">æ‰‹ç»­è´¹</label>
                  <input type="range" id="serviceFeeRate" min="0.04" max="0.1" step="0.01" value="0.04" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary">
                  <div class="flex justify-between mt-1">
                    <span id="serviceFeeRateValue" class="text-sm text-gray-600">0.04</span>
                    <span id="serviceFee" class="text-sm font-medium text-primary">0.00 å…ƒ</span>
                  </div>
                </div>
                <div class="space-y-2">
                  <label for="taxRefund" class="block text-sm font-medium text-gray-700 text-left">é€€ç¨ (å…ƒ)</label>
                  <input type="number" id="taxRefund" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
              </div>
            </div>
            <!-- è¿è¾“è´¹ç”¨å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-truck text-primary mr-2"></i>è¿è¾“è´¹ç”¨
              </h4>
              <div class="grid grid-cols-1 gap-4">
                <div class="space-y-2">
                  <label for="domesticShipping" class="block text-sm font-medium text-gray-700">å›½å†…è¿è¾“ (å…ƒ)</label>
                  <input type="number" id="domesticShipping" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥å›½å†…è¿è¾“è´¹ç”¨" step="0.01" min="0">
                </div>
                <div id="internationalShippingContainer" class="space-y-2 hidden">
                  <label for="internationalShipping" class="block text-sm font-medium text-gray-700">å›½é™…è¿è¾“ (å…ƒ)</label>
                  <input type="number" id="internationalShipping" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥å›½é™…è¿è¾“è´¹ç”¨" step="0.01" min="0">
                </div>
                <div id="seaFreightContainer" class="space-y-2 hidden">
                  <label for="seaFreight" class="block text-sm font-medium text-gray-700">æµ·è¿è´¹ (ç¾å…ƒ)</label>
                  <input type="number" id="seaFreight" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥æµ·è¿è´¹ï¼ˆç¾å…ƒï¼‰" step="0.01" min="0">
                </div>
              </div>
            </div>
          </div>
          <!-- ç¬¬ä¸‰æ’ï¼šæŠ¥ä»·ä¿¡æ¯ã€æ±‡ç‡åŠæœ€ç»ˆæŠ¥ä»· -->
          <div class="grid md:grid-cols-3 gap-4">
            <!-- æˆæœ¬åŠ ä»·å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-dollar text-primary mr-2"></i>æˆæœ¬åŠ ä»·
              </h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="space-y-2">
                  <label for="purchaseCost" class="block text-sm font-medium text-gray-700">é‡‡è´­è´¹ç”¨ (å…ƒ)</label>
                  <input type="number" id="purchaseCost" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
                <div class="space-y-2">
                  <label for="markup" class="block text-sm font-medium text-gray-700">åŠ ä»· (å…ƒ)</label>
                  <input type="number" id="markup" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥æœŸæœ›åŠ ä»·" step="0.01" min="0">
                </div>
              </div>
              <div class="mt-4">
                <div class="space-y-2">
                  <label for="rmbQuote" class="block text-sm font-medium text-gray-700">äººæ°‘å¸å”®ä»· (å…ƒ)</label>
                  <input type="number" id="rmbQuote" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
              </div>
            </div>
            <!-- æ±‡ç‡åŠæœ€ç»ˆæŠ¥ä»·å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-exchange text-primary mr-2"></i>æ±‡ç‡
              </h4>
              <div class="grid grid-cols-1 gap-6">
                <div class="space-y-2">
                  <label for="currency" class="block text-sm font-medium text-gray-700">é€‰æ‹©å¸ç§</label>
                  <div class="flex items-center gap-2 w-full">
                    <div id="currencyFlag" class="flex items-center justify-center rounded-full border border-gray-300 bg-white text-2xl" style="width: 2.5rem; height: 2.5rem; min-width: 2.5rem; min-height: 2.5rem;">
                      ğŸ‡ºğŸ‡¸
                    </div>
                    <select 
                      id="currency" 
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom"
                    >
                      <option value="USD" selected>ç¾å…ƒ (USD)</option>
                      <option value="EUR">æ¬§å…ƒ (EUR)</option>
                      <option value="GBP">è‹±é•‘ (GBP)</option>
                    </select>
                  </div>
                </div>
                <div class="space-y-2">
                  <label for="exchangeRate" class="block text-sm font-medium text-gray-700" id="exchangeRateLabel">æ±‡ç‡ å®æ—¶åŸºå‡†ï¼šæ˜¾ç¤ºæ±‡ç‡æ•°å€¼</label>
                  <input 
                    type="number" 
                    id="exchangeRate" 
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom"
                    placeholder="åŠ è½½ä¸­..."
                    step="0.0001"
                  >
                </div>
              </div>
            </div>
            <!-- æ–°å¢æœ€ç»ˆæŠ¥ä»·å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 flex flex-col justify-between">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-calculator text-primary mr-2"></i>æœ€ç»ˆæŠ¥ä»·
              </h4>
              <div class="flex-1 flex flex-col justify-center gap-4">
                <div class="space-y-2">
                  <label for="costPrice" class="block text-sm font-medium text-gray-700">æˆæœ¬ä»·æ ¼</label>
                  <input 
                    type="number" 
                    id="costPrice" 
                    class="w-full px-4 py-2 border-2 border-gray-300 bg-gray-50 rounded-lg text-lg font-medium input-focus transition-custom"
                    placeholder="è‡ªåŠ¨è®¡ç®—"
                    step="0.01"
                    readonly
                  >
                </div>
                <div class="space-y-2">
                  <label for="finalQuote" class="block text-sm font-medium text-gray-700">æœ€ç»ˆæŠ¥ä»·</label>
                  <input 
                    type="number" 
                    id="finalQuote" 
                    class="w-full px-4 py-2 border-2 border-primary bg-primary/5 rounded-lg text-lg font-medium input-focus transition-custom"
                    placeholder="è‡ªåŠ¨è®¡ç®—"
                    step="0.01"
                    readonly
                  >
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <!-- äºŒæ‰‹è½¦è¡¨å• (é»˜è®¤éšè—) -->
        <section id="usedCarForm" class="hidden space-y-8">
          <!-- ç¬¬ä¸€æ’ï¼šåŸºç¡€ä»·æ ¼ä¿¡æ¯ã€ç¨è´¹åŠæœåŠ¡è´¹ç”¨ã€è¿è¾“è´¹ç”¨ -->
          <div class="grid md:grid-cols-3 gap-4">
            <!-- åŸºç¡€ä»·æ ¼ä¿¡æ¯å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-tag text-primary mr-2"></i>ä»·æ ¼ä¿¡æ¯
              </h4>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- æŒ‡å¯¼ä»· -->
                <div class="space-y-2">
                  <label for="usedGuidePrice" class="block text-sm font-medium text-gray-700">æŒ‡å¯¼ä»· (å…ƒ)</label>
                  <input type="number" id="usedGuidePrice" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥æŒ‡å¯¼ä»·" step="0.01" min="0">
                </div>
                <!-- ä¼˜æƒ  -->
                <div class="space-y-2">
                  <label for="usedDiscount" class="block text-sm font-medium text-gray-700">ä¼˜æƒ  (å…ƒ)</label>
                  <input type="number" id="usedDiscount" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥ä¼˜æƒ é‡‘é¢" step="0.01" min="0">
                </div>
                <!-- é€‰è£… -->
                <div class="space-y-2">
                  <label for="usedOptionalEquipment" class="block text-sm font-medium text-gray-700">é€‰è£… (å…ƒ)</label>
                  <input type="number" id="usedOptionalEquipment" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥é€‰è£…è´¹ç”¨" step="0.01" min="0" value="0">
                </div>
                <!-- äº¤å¼ºé™© -->
                <div class="space-y-2">
                  <label for="usedCompulsoryInsurance" class="block text-sm font-medium text-gray-700">äº¤å¼ºé™© (å…ƒ)</label>
                  <input type="number" id="usedCompulsoryInsurance" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥äº¤å¼ºé™©è´¹ç”¨" step="0.01" min="0" value="0">
                </div>
                <!-- å¼€ç¥¨ä»· (è‡ªåŠ¨è®¡ç®—) -->
                <div class="space-y-2 md:col-span-2">
                  <label for="usedInvoicePrice" class="block text-sm font-medium text-gray-700">å¼€ç¥¨ä»· (å…ƒ)</label>
                  <input type="number" id="usedInvoicePrice" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
              </div>
            </div>
            <!-- ç¨è´¹åŠæœåŠ¡è´¹ç”¨å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 tax-fee-card">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-calculator text-primary mr-2"></i>ç¨è´¹ä¿¡æ¯
              </h4>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="space-y-2">
                  <label for="usedPurchaseTax" class="block text-sm font-medium text-gray-700">è´­ç½®ç¨ (å…ƒ)</label>
                  <input type="number" id="usedPurchaseTax" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
                <div class="space-y-2">
                  <label for="usedQualificationFee" class="block text-sm font-medium text-gray-700">èµ„è´¨è´¹ç”¨ (å…ƒ)</label>
                  <input type="number" id="usedQualificationFee" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥èµ„è´¨è´¹ç”¨" step="0.01" min="0">
                </div>
                <div class="space-y-2">
                  <label for="usedAgencyFee" class="block text-sm font-medium text-gray-700">ä»£åŠè´¹ (å…ƒ)</label>
                  <input type="number" id="usedAgencyFee" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥ä»£åŠè´¹ç”¨" step="0.01" min="0">
                </div>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                <div class="space-y-2">
                  <label for="usedTaxRefund" class="block text-sm font-medium text-gray-700">é€€ç¨ (å…ƒ)</label>
                  <input type="number" id="usedTaxRefund" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
                <div class="space-y-2">
                  <label for="usedTaxRefundFee" class="block text-sm font-medium text-gray-700">é€€ç¨æ‰‹ç»­è´¹ (å…ƒ)</label>
                  <input type="number" id="usedTaxRefundFee" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
              </div>
            </div>
            <!-- è¿è¾“è´¹ç”¨å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-truck text-primary mr-2"></i>è¿è¾“è´¹ç”¨
              </h4>
              <div class="grid grid-cols-1 gap-4">
                <!-- å›½å†…è¿è¾“ -->
                <div class="space-y-2">
                  <label for="usedDomesticShipping" class="block text-sm font-medium text-gray-700">å›½å†…è¿è¾“ (å…ƒ)</label>
                  <input type="number" id="usedDomesticShipping" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥å›½å†…è¿è¾“è´¹ç”¨" step="0.01" min="0">
                </div>
                <!-- å›½é™…è¿è¾“ (æ¡ä»¶æ˜¾ç¤º) -->
                <div id="usedInternationalShippingContainer" class="space-y-2 hidden">
                  <label for="usedInternationalShipping" class="block text-sm font-medium text-gray-700">å›½é™…è¿è¾“ (å…ƒ)</label>
                  <input type="number" id="usedInternationalShipping" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥å›½é™…è¿è¾“è´¹ç”¨" step="0.01" min="0">
                </div>
                <div id="usedSeaFreightContainer" class="space-y-2 hidden">
                  <label for="usedSeaFreight" class="block text-sm font-medium text-gray-700">æµ·è¿è´¹ (ç¾å…ƒ)</label>
                  <input type="number" id="usedSeaFreight" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥æµ·è¿è´¹ï¼ˆç¾å…ƒï¼‰" step="0.01" min="0">
                </div>
              </div>
            </div>
          </div>
          <!-- ç¬¬äºŒæ’ï¼šæŠ¥ä»·ä¿¡æ¯å’Œæ±‡ç‡å¡ç‰‡ -->
          <div class="grid md:grid-cols-3 gap-4">
            <!-- æˆæœ¬åŠ ä»·å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-dollar text-primary mr-2"></i>æˆæœ¬åŠ ä»·
              </h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="space-y-2">
                  <label for="usedPurchaseCost" class="block text-sm font-medium text-gray-700">é‡‡è´­è´¹ç”¨ (å…ƒ)</label>
                  <input type="number" id="usedPurchaseCost" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
                <div class="space-y-2">
                  <label for="usedMarkup" class="block text-sm font-medium text-gray-700">åŠ ä»· (å…ƒ)</label>
                  <input type="number" id="usedMarkup" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥æœŸæœ›åŠ ä»·" step="0.01" min="0">
                </div>
              </div>
              <div class="mt-4">
                <div class="space-y-2">
                  <label for="usedRmbQuote" class="block text-sm font-medium text-gray-700">äººæ°‘å¸å”®ä»· (å…ƒ)</label>
                  <input type="number" id="usedRmbQuote" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
              </div>
            </div>
            <!-- æ±‡ç‡åŠæœ€ç»ˆæŠ¥ä»·å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200" id="currencySectionUsed">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-exchange text-primary mr-2"></i>æ±‡ç‡
              </h4>
              <div class="grid grid-cols-1 gap-6">
                <div class="space-y-2">
                  <label for="currencyUsed" class="block text-sm font-medium text-gray-700">é€‰æ‹©å¸ç§</label>
                  <div class="flex items-center gap-2 w-full">
                    <div id="currencyFlagUsed" class="flex items-center justify-center rounded-full border border-gray-300 bg-white text-2xl" style="width: 2.5rem; height: 2.5rem; min-width: 2.5rem; min-height: 2.5rem;">ğŸ‡ºğŸ‡¸</div>
                    <select id="currencyUsed" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom">
                      <option value="USD" selected>ç¾å…ƒ (USD)</option>
                      <option value="EUR">æ¬§å…ƒ (EUR)</option>
                      <option value="GBP">è‹±é•‘ (GBP)</option>
                    </select>
                  </div>
                </div>
                <div class="space-y-2">
                  <label for="exchangeRateUsed" class="block text-sm font-medium text-gray-700" id="exchangeRateLabelUsed">æ±‡ç‡ å®æ—¶åŸºå‡†ï¼šæ˜¾ç¤ºæ±‡ç‡æ•°å€¼</label>
                  <input type="number" id="exchangeRateUsed" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="åŠ è½½ä¸­..." step="0.0001">
                </div>
              </div>
            </div>
            <!-- æ–°å¢æœ€ç»ˆæŠ¥ä»·å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 flex flex-col justify-between">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-calculator text-primary mr-2"></i>æœ€ç»ˆæŠ¥ä»·
              </h4>
              <div class="flex-1 flex flex-col justify-center gap-4">
                <div class="space-y-2">
                  <label for="costPriceUsed" class="block text-sm font-medium text-gray-700">æˆæœ¬ä»·æ ¼</label>
                  <input 
                    type="number" 
                    id="costPriceUsed" 
                    class="w-full px-4 py-2 border-2 border-gray-300 bg-gray-50 rounded-lg text-lg font-medium input-focus transition-custom"
                    placeholder="è‡ªåŠ¨è®¡ç®—"
                    step="0.01"
                    readonly
                  >
                </div>
                <div class="space-y-2">
                  <label for="finalQuoteUsed" class="block text-sm font-medium text-gray-700">æœ€ç»ˆæŠ¥ä»·</label>
                  <input type="number" id="finalQuoteUsed" class="w-full px-4 py-2 border-2 border-primary bg-primary/5 rounded-lg text-lg font-medium input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <!-- æ–°èƒ½æºè¡¨å• (é»˜è®¤éšè—) -->
        <section id="newEnergyForm" class="hidden space-y-8">
          <!-- ç¬¬ä¸€æ’ï¼šåŸºç¡€ä»·æ ¼ä¿¡æ¯ã€ç¨è´¹åŠæœåŠ¡è´¹ç”¨ã€è¿è¾“è´¹ç”¨ -->
          <div class="grid md:grid-cols-3 gap-4">
            <!-- åŸºç¡€ä»·æ ¼ä¿¡æ¯å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-tag text-primary mr-2"></i>ä»·æ ¼ä¿¡æ¯
              </h4>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- æŒ‡å¯¼ä»· -->
                <div class="space-y-2">
                  <label for="newEnergyGuidePrice" class="block text-sm font-medium text-gray-700">æŒ‡å¯¼ä»· (å…ƒ)</label>
                  <input type="number" id="newEnergyGuidePrice" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥æŒ‡å¯¼ä»·" step="0.01" min="0">
                </div>
                <!-- ä¼˜æƒ  -->
                <div class="space-y-2">
                  <label for="newEnergyDiscount" class="block text-sm font-medium text-gray-700">ä¼˜æƒ  (å…ƒ)</label>
                  <input type="number" id="newEnergyDiscount" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥ä¼˜æƒ é‡‘é¢" step="0.01" min="0">
                </div>
                <!-- é€‰è£… -->
                <div class="space-y-2">
                  <label for="newEnergyOptionalEquipment" class="block text-sm font-medium text-gray-700">é€‰è£… (å…ƒ)</label>
                  <input type="number" id="newEnergyOptionalEquipment" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥é€‰è£…è´¹ç”¨" step="0.01" min="0" value="0">
                </div>
                <!-- äº¤å¼ºé™© -->
                <div class="space-y-2">
                  <label for="newEnergyCompulsoryInsurance" class="block text-sm font-medium text-gray-700">äº¤å¼ºé™© (å…ƒ)</label>
                  <input type="number" id="newEnergyCompulsoryInsurance" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥äº¤å¼ºé™©è´¹ç”¨" step="0.01" min="0" value="0">
                </div>
                <!-- å¼€ç¥¨ä»· (è‡ªåŠ¨è®¡ç®—) -->
                <div class="space-y-2 md:col-span-2">
                  <label for="newEnergyInvoicePrice" class="block text-sm font-medium text-gray-700">å¼€ç¥¨ä»· (å…ƒ)</label>
                  <input type="number" id="newEnergyInvoicePrice" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
              </div>
            </div>
            <!-- ç¨è´¹åŠæœåŠ¡è´¹ç”¨å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 tax-fee-card">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-calculator text-primary mr-2"></i>ç¨è´¹ä¿¡æ¯
                <span class="ml-2 text-xs text-gray-600 flex items-center">
                  <i class="fa fa-info-circle mr-1 text-gray-600"></i>
                  <span id="newEnergyTaxNote">å…å¾è´­ç½®ç¨</span>
                </span>
              </h4>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="space-y-2">
                  <label for="newEnergyPurchaseTax" class="block text-sm font-medium text-gray-700">è´­ç½®ç¨ (å…ƒ)</label>
                  <input type="number" id="newEnergyPurchaseTax" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
                <div class="space-y-2">
                  <label for="newEnergyQualificationFee" class="block text-sm font-medium text-gray-700">èµ„è´¨è´¹ç”¨ (å…ƒ)</label>
                  <input type="number" id="newEnergyQualificationFee" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥èµ„è´¨è´¹ç”¨" step="0.01" min="0">
                </div>
                <div class="space-y-2">
                  <label for="newEnergyAgencyFee" class="block text-sm font-medium text-gray-700">ä»£åŠè´¹ (å…ƒ)</label>
                  <input type="number" id="newEnergyAgencyFee" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥ä»£åŠè´¹ç”¨" step="0.01" min="0">
                </div>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                <div class="space-y-2">
                  <label for="newEnergyTaxRefund" class="block text-sm font-medium text-gray-700">é€€ç¨ (å…ƒ)</label>
                  <input type="number" id="newEnergyTaxRefund" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
                <div class="space-y-2">
                  <label for="newEnergyTaxRefundFee" class="block text-sm font-medium text-gray-700">é€€ç¨æ‰‹ç»­è´¹ (å…ƒ)</label>
                  <input type="number" id="newEnergyTaxRefundFee" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
              </div>
            </div>
            <!-- è¿è¾“è´¹ç”¨å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-truck text-primary mr-2"></i>è¿è¾“è´¹ç”¨
              </h4>
              <div class="grid grid-cols-1 gap-4">
                <!-- å›½å†…è¿è¾“ -->
                <div class="space-y-2">
                  <label for="newEnergyDomesticShipping" class="block text-sm font-medium text-gray-700">å›½å†…è¿è¾“ (å…ƒ)</label>
                  <input type="number" id="newEnergyDomesticShipping" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥å›½å†…è¿è¾“è´¹ç”¨" step="0.01" min="0">
                </div>
                <!-- å›½é™…è¿è¾“ (æ¡ä»¶æ˜¾ç¤º) -->
                <div id="newEnergyInternationalShippingContainer" class="space-y-2 hidden">
                  <label for="newEnergyInternationalShipping" class="block text-sm font-medium text-gray-700">å›½é™…è¿è¾“ (å…ƒ)</label>
                  <input type="number" id="newEnergyInternationalShipping" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥å›½é™…è¿è¾“è´¹ç”¨" step="0.01" min="0">
                </div>
                <div id="newEnergySeaFreightContainer" class="space-y-2 hidden">
                  <label for="newEnergySeaFreight" class="block text-sm font-medium text-gray-700">æµ·è¿è´¹ (ç¾å…ƒ)</label>
                  <input type="number" id="newEnergySeaFreight" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥æµ·è¿è´¹ï¼ˆç¾å…ƒï¼‰" step="0.01" min="0">
                </div>
              </div>
            </div>
          </div>
          <!-- ç¬¬äºŒæ’ï¼šæŠ¥ä»·ä¿¡æ¯å’Œæ±‡ç‡å¡ç‰‡ -->
          <div class="grid md:grid-cols-3 gap-4">
            <!-- æˆæœ¬åŠ ä»·å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-dollar text-primary mr-2"></i>æˆæœ¬åŠ ä»·
              </h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="space-y-2">
                  <label for="newEnergyPurchaseCost" class="block text-sm font-medium text-gray-700">é‡‡è´­è´¹ç”¨ (å…ƒ)</label>
                  <input type="number" id="newEnergyPurchaseCost" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
                <div class="space-y-2">
                  <label for="newEnergyMarkup" class="block text-sm font-medium text-gray-700">åŠ ä»· (å…ƒ)</label>
                  <input type="number" id="newEnergyMarkup" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="è¾“å…¥æœŸæœ›åŠ ä»·" step="0.01" min="0">
                </div>
              </div>
              <div class="mt-4">
                <div class="space-y-2">
                  <label for="newEnergyRmbQuote" class="block text-sm font-medium text-gray-700">äººæ°‘å¸å”®ä»· (å…ƒ)</label>
                  <input type="number" id="newEnergyRmbQuote" class="w-full px-4 py-2 border border-gray-300 bg-gray-50 rounded-lg input-focus transition-custom" placeholder="è‡ªåŠ¨è®¡ç®—" step="0.01" readonly>
                </div>
              </div>
            </div>
            <!-- æ±‡ç‡åŠæœ€ç»ˆæŠ¥ä»·å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200" id="currencySectionNewEnergy">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-exchange text-primary mr-2"></i>æ±‡ç‡
              </h4>
              <div class="grid grid-cols-1 gap-6">
                <div class="space-y-2">
                  <label for="currencyNewEnergy" class="block text-sm font-medium text-gray-700">é€‰æ‹©å¸ç§</label>
                  <div class="flex items-center gap-2 w-full">
                    <div id="currencyFlagNewEnergy" class="flex items-center justify-center rounded-full border border-gray-300 bg-white text-2xl" style="width: 2.5rem; height: 2.5rem; min-width: 2.5rem; min-height: 2.5rem;">ğŸ‡ºğŸ‡¸</div>
                    <select id="currencyNewEnergy" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom">
                      <option value="USD" selected>ç¾å…ƒ (USD)</option>
                      <option value="EUR">æ¬§å…ƒ (EUR)</option>
                      <option value="GBP">è‹±é•‘ (GBP)</option>
                    </select>
                  </div>
                </div>
                <div class="space-y-2">
                  <label for="exchangeRateNewEnergy" class="block text-sm font-medium text-gray-700" id="exchangeRateLabelNewEnergy">æ±‡ç‡ å®æ—¶åŸºå‡†ï¼šæ˜¾ç¤ºæ±‡ç‡æ•°å€¼</label>
                  <input type="number" id="exchangeRateNewEnergy" class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus transition-custom" placeholder="åŠ è½½ä¸­..." step="0.0001">
                </div>
              </div>
            </div>
            <!-- æ–°å¢æœ€ç»ˆæŠ¥ä»·å¡ç‰‡ -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 flex flex-col justify-between">
              <h4 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                <i class="fa fa-calculator text-primary mr-2"></i>æœ€ç»ˆæŠ¥ä»·
              </h4>
              <div class="flex-1 flex flex-col justify-center gap-4">
                <div class="space-y-2">
                  <label for="costPriceNewEnergy" class="block text-sm font-medium text-gray-700">æˆæœ¬ä»·æ ¼</label>
                  <input 
                    type="number" 
                    id="costPriceNewEnergy" 
                    class="w-full px-4 py-2 border-2 border-gray-300 bg-gray-50 rounded-lg text-lg font-medium input-focus transition-custom"
                    placeholder="è‡ªåŠ¨è®¡ç®—"
                    step="0.01"
                    readonly
                  >
                </div>
                <div class="space-y-2">
                  <label for="finalQuoteNewEnergy" class="block text-sm font-medium text-gray-700">æœ€ç»ˆæŠ¥ä»·</label>
                  <input 
                    type="number" 
                    id="finalQuoteNewEnergy" 
                    class="w-full px-4 py-2 border-2 border-primary bg-primary/5 rounded-lg text-lg font-medium input-focus transition-custom"
                    placeholder="è‡ªåŠ¨è®¡ç®—"
                    step="0.01"
                    readonly
                  >
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <!-- æäº¤æŒ‰é’® -->
        <div class="flex justify-center pt-4">
          <button 
            type="button" 
            id="calculateBtn"
            class="px-8 py-3 bg-primary hover:bg-primary/90 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-custom flex items-center"
          >
            <i class="fa fa-calculator mr-2"></i>è®¡ç®—æŠ¥ä»·
          </button>
        </div>
      </form>
      <!-- æ±‡ç‡åŠæœ€ç»ˆæŠ¥ä»·å¡ç‰‡å…¨å±€å”¯ä¸€ï¼Œç§»åˆ°formå¤–éƒ¨ï¼Œå§‹ç»ˆå¯è§ -->
      <div id="currencySection" class="mt-8">
        <!-- ...åŸæœ‰æ±‡ç‡åŠæœ€ç»ˆæŠ¥ä»·å¡ç‰‡å†…å®¹... -->
      </div>
      <!-- æŠ¥ä»·ç»“æœå¡ç‰‡ï¼Œç¡®ä¿åœ¨ä¸»å†…å®¹åŒºä¸”IDå”¯ä¸€ -->
      <div id="resultCard" class="hidden bg-white rounded-xl shadow-md p-6 md:p-8 mb-8 transform transition-custom hover:shadow-lg">
        <h3 class="text-xl font-semibold mb-6 flex items-center">
          <i class="fa fa-file-text-o text-primary mr-2"></i>æŠ¥ä»·ç»“æœ
        </h3>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="border-b border-gray-100 pb-4 md:border-b-0 md:border-r border-gray-100 md:pr-6">
            <h4 class="text-lg font-medium text-gray-700 mb-4">åŸºç¡€ä¿¡æ¯</h4>
            <ul class="space-y-3">
              <li class="flex justify-between">
                <span class="text-gray-600">è½¦å‹åç§°:</span>
                <span id="resultCarModel" class="font-medium"></span>
              </li>
              <li class="flex justify-between">
                <span class="text-gray-600">è½¦å‹ç±»å‹:</span>
                <span id="resultCarType" class="font-medium"></span>
              </li>
              <li class="flex justify-between">
                <span class="text-gray-600">æŠ¥ä»·ç±»å‹:</span>
                <span id="resultQuoteType" class="font-medium"></span>
              </li>
            </ul>
          </div>
          
          <div>
            <h4 class="text-lg font-medium text-gray-700 mb-4">æˆæœ¬æ˜ç»†</h4>
            <ul class="space-y-3" id="resultCostDetails">
              <!-- åŠ¨æ€å¡«å…… -->
            </ul>
          </div>
        </div>
        
        <div class="mt-6 pt-6 border-t border-gray-100">
          <h4 class="text-lg font-medium text-gray-700 mb-4">æŠ¥ä»·æ±‡æ€»</h4>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-gray-50 p-4 rounded-lg text-center">
              <div class="text-sm text-gray-500 mb-1">äººæ°‘å¸æŠ¥ä»·</div>
              <div id="resultRmbQuote" class="text-lg font-semibold"></div>
            </div>
            <div class="bg-primary/10 p-4 rounded-lg text-center border border-primary/20">
              <div class="text-sm text-gray-500 mb-1" id="resultCurrencyText">æœ€ç»ˆæŠ¥ä»· (USD)</div>
              <div id="resultFinalQuote" class="text-lg font-semibold text-primary"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <!-- æœç´¢ä¸‹æ‹‰èœå• - ç§»åˆ°bodyçº§åˆ«é¿å…è¢«å®¹å™¨é™åˆ¶ -->
  <div id="searchCarResults" class="hidden fixed z-[999999] max-h-60 overflow-y-auto border border-gray-200 rounded-lg bg-white shadow-lg"></div>
  
  <!-- æœç´¢å†å²è®°å½•é¢æ¿ - ç§»åˆ°bodyçº§åˆ«é¿å…è¢«å®¹å™¨é™åˆ¶ -->
  <div id="searchHistoryPanel" class="hidden fixed z-[999999] max-h-60 overflow-y-auto border border-gray-200 rounded-lg bg-white shadow-lg">
    <div class="p-3 border-b border-gray-100">
      <div class="flex items-center justify-between">
        <h4 class="text-sm font-medium text-gray-700">æœç´¢å†å²</h4>
        <button 
          type="button" 
          id="clearHistoryBtn" 
          class="text-xs text-red-500 hover:text-red-700 transition-colors"
          title="æ¸…é™¤æ‰€æœ‰å†å²è®°å½•"
        >
          <i class="fa fa-trash mr-1"></i>æ¸…é™¤å†å²
        </button>
      </div>
    </div>
    <div id="searchHistoryList" class="max-h-48 overflow-y-auto">
      <!-- å†å²è®°å½•é¡¹å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
    </div>
    <div id="noHistoryMessage" class="hidden p-4 text-center text-gray-500 text-sm">
      <i class="fa fa-info-circle mr-1"></i>æš‚æ— æœç´¢å†å²
    </div>
  </div>

  <!-- é¡µè„š -->
  <footer class="bg-white shadow-sm py-8 transition-custom">
    <div class="container mx-auto px-4">
      <div class="text-center text-gray-500 text-sm">
        Designed by DTBKnight
      </div>
    </div>
  </footer>

  <script>
    // æ ¼å¼åŒ–æ•°å­—ä¸ºè´§å¸æ ¼å¼
    function formatCurrency(value, currency = 'CNY') {
      if (isNaN(value) || value === '' || value === null) return '0.00';
      
      const options = {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
      };
      
      if (currency === 'CNY') {
        options.style = 'currency';
        options.currency = 'CNY';
      } else if (currency === 'USD') {
        options.style = 'currency';
        options.currency = 'USD';
      } else if (currency === 'EUR') {
        options.style = 'currency';
        options.currency = 'EUR';
      } else if (currency === 'GBP') {
        options.style = 'currency';
        options.currency = 'GBP';
      }
      
      return new Intl.NumberFormat('zh-CN', options).format(value);
    }
    
    // æ ¼å¼åŒ–æ•°å­—ä¸ºæ•´æ•°è´§å¸æ ¼å¼ï¼ˆä¸æ˜¾ç¤ºå°æ•°ç‚¹ï¼‰
    function formatCurrencyInteger(value, currency = 'CNY') {
      if (isNaN(value) || value === '' || value === null) return 'Â¥0';
      
      const options = {
        minimumFractionDigits: 0,
        maximumFractionDigits: 0,
      };
      
      if (currency === 'CNY') {
        options.style = 'currency';
        options.currency = 'CNY';
      } else if (currency === 'USD') {
        options.style = 'currency';
        options.currency = 'USD';
      } else if (currency === 'EUR') {
        options.style = 'currency';
        options.currency = 'EUR';
      } else if (currency === 'GBP') {
        options.style = 'currency';
        options.currency = 'GBP';
      }
      
      return new Intl.NumberFormat('zh-CN', options).format(value);
    }
    
    // å¤„ç†è½¦å‹ç±»å‹åˆ‡æ¢ - æ ¸å¿ƒä¿®å¤éƒ¨åˆ†
    // åˆ‡æ¢åˆ°æ–°è½¦ä¸»é¢˜ï¼ˆè“è‰²ï¼‰
    function switchToNewCarTheme() {
      const body = document.getElementById('mainBody');
      body.classList.remove('used-car-theme', 'new-energy-theme');
      updateThemeColors('#165DFF', '#36CFC9', '#FF7D00');
    }
    
    // åˆ‡æ¢åˆ°äºŒæ‰‹è½¦ä¸»é¢˜ï¼ˆæ©™è‰²ï¼‰
    function switchToUsedCarTheme() {
      const body = document.getElementById('mainBody');
      body.classList.remove('new-energy-theme');
      body.classList.add('used-car-theme');
      
      // æ›´æ–°æ‰€æœ‰ä¸»è¦é¢œè‰²å…ƒç´  - ä½¿ç”¨æ©™è‰²ä¸»é¢˜
      updateThemeColors('#FF6B35', '#FF8C42', '#FF7D00');
    }
    
    // åˆ‡æ¢åˆ°æ–°èƒ½æºä¸»é¢˜ï¼ˆç»¿è‰²ï¼‰
    function switchToNewEnergyTheme() {
      const body = document.getElementById('mainBody');
      body.classList.remove('used-car-theme');
      body.classList.add('new-energy-theme');
      
      // æ›´æ–°æ‰€æœ‰ä¸»è¦é¢œè‰²å…ƒç´ 
      updateThemeColors('#22C55E', '#4ADE80', '#FF7D00');
    }
    
    // æ›´æ–°ä¸»é¢˜é¢œè‰²
    function updateThemeColors(primary, secondary, accent) {
      // æ›´æ–°CSSå˜é‡
      document.documentElement.style.setProperty('--primary-color', primary);
      document.documentElement.style.setProperty('--secondary-color', secondary);
      document.documentElement.style.setProperty('--accent-color', accent);
      
      // æ›´æ–°æ»‘å—é¢œè‰²
      const sliders = document.querySelectorAll('input[type="range"]');
      sliders.forEach(slider => {
        slider.style.setProperty('--tw-accent-color', primary);
      });
      
      // æ›´æ–°å•é€‰æŒ‰é’®é¢œè‰²
      const radios = document.querySelectorAll('input[type="radio"]');
      radios.forEach(radio => {
        radio.style.setProperty('--tw-accent-color', primary);
      });
    }
    
    // ä¸»é¢˜ç³»ç»Ÿç›¸å…³ä»£ç å·²ç§»é™¤ï¼Œå§‹ç»ˆä¸ºç™½å¤©æ¨¡å¼
    
    // å¤„ç†æ–°è½¦æŠ¥ä»·ç±»å‹åˆ‡æ¢ï¼ˆæ˜¾ç¤º/éšè—å›½é™…è¿è¾“ï¼‰
    document.querySelectorAll('input[name="globalQuoteType"]').forEach(radio => {
      radio.addEventListener('change', function() {
        const container = document.getElementById('internationalShippingContainer');
        if (this.value === 'EXW') {
          container.classList.add('hidden');
          document.getElementById('internationalShipping').value = '';
        } else {
          container.classList.remove('hidden');
          container.classList.add('animate-fadeIn');
        }
        calculateNewCarAll();
      });
    });
    
    // æ–°è½¦è¡¨å• - æ‰‹ç»­è´¹ç³»æ•°æ»‘å—
    const serviceFeeRate = document.getElementById('serviceFeeRate');
    const serviceFeeRateValue = document.getElementById('serviceFeeRateValue');
    const serviceFee = document.getElementById('serviceFee');
    
    serviceFeeRate.addEventListener('input', function() {
      const value = parseFloat(this.value).toFixed(2);
      serviceFeeRateValue.textContent = value;
      calculateNewCarServiceFee();
      calculateNewCarPurchaseCost();
      calculateNewCarRmbQuote();
      calculateFinalQuote();
    });
    
    // æ–°è½¦è®¡ç®— - å¼€ç¥¨ä»·
    function calculateNewCarInvoicePrice() {
      const guidePrice = parseFloat(document.getElementById('guidePrice').value) || 0;
      const discount = parseFloat(document.getElementById('discount').value) || 0;
      const optionalEquipment = parseFloat(document.getElementById('optionalEquipment').value) || 0;
      const invoicePrice = Math.max(0, guidePrice + optionalEquipment - discount);
      document.getElementById('invoicePrice').value = Math.round(invoicePrice);
      return invoicePrice;
    }
    
    // æ–°è½¦è®¡ç®— - é€€ç¨
    function calculateNewCarTaxRefund() {
      const invoicePrice = parseFloat(document.getElementById('invoicePrice').value) || 0;
      const taxRefund = invoicePrice / 1.13 * 0.13;
      document.getElementById('taxRefund').value = taxRefund.toFixed(2);
      return taxRefund;
    }
    
    // æ–°è½¦è®¡ç®— - æ‰‹ç»­è´¹
    function calculateNewCarServiceFee() {
      const rate = parseFloat(document.getElementById('serviceFeeRate').value);
      const invoicePrice = parseFloat(document.getElementById('invoicePrice').value) || 0;
      const fee = rate * invoicePrice;
      serviceFee.textContent = formatCurrency(Math.round(fee));
      return fee;
    }
    
    // æ–°è½¦è®¡ç®— - è´­è½¦æˆæœ¬
    function calculateNewCarPurchaseCost() {
      const invoicePrice = parseFloat(document.getElementById('invoicePrice').value) || 0;
      const serviceFee = calculateNewCarServiceFee();
      const domesticShipping = parseFloat(document.getElementById('domesticShipping').value) || 0;
      const internationalShipping = parseFloat(document.getElementById('internationalShipping').value) || 0;
      const compulsoryInsurance = parseFloat(document.getElementById('compulsoryInsurance').value) || 0;
      const taxRefund = parseFloat(document.getElementById('taxRefund').value) || 0;
      
      const purchaseCost = invoicePrice + serviceFee + domesticShipping + internationalShipping + compulsoryInsurance - taxRefund;
      document.getElementById('purchaseCost').value = Math.round(purchaseCost);
      return purchaseCost;
    }
    
    // æ–°è½¦è®¡ç®— - äººæ°‘å¸æŠ¥ä»·
    function calculateNewCarRmbQuote() {
      const purchaseCost = parseFloat(document.getElementById('purchaseCost').value) || 0;
      const markup = parseFloat(document.getElementById('markup').value) || 0;
      const rmbQuote = purchaseCost + markup;
      document.getElementById('rmbQuote').value = Math.round(rmbQuote);
      return rmbQuote;
    }
    
    // äºŒæ‰‹è½¦è®¡ç®— - å¼€ç¥¨ä»·
    function calculateUsedCarInvoicePrice() {
      const guidePrice = parseFloat(document.getElementById('usedGuidePrice').value) || 0;
      const discount = parseFloat(document.getElementById('usedDiscount').value) || 0;
      const optionalEquipment = parseFloat(document.getElementById('usedOptionalEquipment').value) || 0;
      const invoicePrice = Math.max(0, guidePrice + optionalEquipment - discount);
      document.getElementById('usedInvoicePrice').value = Math.round(invoicePrice);
      return invoicePrice;
    }
    
    // äºŒæ‰‹è½¦è®¡ç®— - è´­ç½®ç¨
    function calculateUsedCarPurchaseTax() {
      const invoicePrice = parseFloat(document.getElementById('usedInvoicePrice').value) || 0;
      const purchaseTax = invoicePrice / 11.3;
      document.getElementById('usedPurchaseTax').value = purchaseTax.toFixed(2);
      return purchaseTax;
    }
    
    // äºŒæ‰‹è½¦è®¡ç®— - é€€ç¨
    function calculateUsedCarTaxRefund() {
      const invoicePrice = parseFloat(document.getElementById('usedInvoicePrice').value) || 0;
      const taxRefund = invoicePrice / 1.13 * 0.13;
      document.getElementById('usedTaxRefund').value = taxRefund.toFixed(2);
      return taxRefund;
    }
    
    // äºŒæ‰‹è½¦è®¡ç®— - é€€ç¨æ‰‹ç»­è´¹
    function calculateUsedCarTaxRefundFee() {
      const taxRefund = parseFloat(document.getElementById('usedTaxRefund').value) || 0;
      const taxRefundFee = taxRefund * 0.025;
      document.getElementById('usedTaxRefundFee').value = Math.round(taxRefundFee);
      return taxRefundFee;
    }
    
    // äºŒæ‰‹è½¦è®¡ç®— - è´­è½¦æˆæœ¬
    function calculateUsedCarPurchaseCost() {
      const invoicePrice = parseFloat(document.getElementById('usedInvoicePrice').value) || 0;
      const purchaseTax = calculateUsedCarPurchaseTax();
      const qualificationFee = parseFloat(document.getElementById('usedQualificationFee').value) || 0;
      const agencyFee = parseFloat(document.getElementById('usedAgencyFee').value) || 0;
      const taxRefund = parseFloat(document.getElementById('usedTaxRefund').value) || 0;
      const taxRefundFee = calculateUsedCarTaxRefundFee();
      const domesticShipping = parseFloat(document.getElementById('usedDomesticShipping').value) || 0;
      const internationalShipping = parseFloat(document.getElementById('usedInternationalShipping').value) || 0;
      const compulsoryInsurance = parseFloat(document.getElementById('usedCompulsoryInsurance').value) || 0;
      
      const purchaseCost = invoicePrice + purchaseTax + qualificationFee + agencyFee + taxRefundFee + domesticShipping + internationalShipping + compulsoryInsurance - taxRefund;
      document.getElementById('usedPurchaseCost').value = Math.round(purchaseCost);
      return purchaseCost;
    }
    
    // äºŒæ‰‹è½¦è®¡ç®— - äººæ°‘å¸æŠ¥ä»·
    function calculateUsedCarRmbQuote() {
      const purchaseCost = parseFloat(document.getElementById('usedPurchaseCost').value) || 0;
      const markup = parseFloat(document.getElementById('usedMarkup').value) || 0;
      const rmbQuote = purchaseCost + markup;
      const rmbInput = document.getElementById('usedRmbQuote');
      rmbInput.value = Math.round(rmbQuote);
      rmbInput.dispatchEvent(new Event('input'));
      return rmbQuote;
    }
    
    // æ–°èƒ½æºè®¡ç®— - å¼€ç¥¨ä»·
    function calculateNewEnergyInvoicePrice() {
      const guidePrice = parseFloat(document.getElementById('newEnergyGuidePrice').value) || 0;
      const discount = parseFloat(document.getElementById('newEnergyDiscount').value) || 0;
      const optionalEquipment = parseFloat(document.getElementById('newEnergyOptionalEquipment').value) || 0;
      const invoicePrice = Math.max(0, guidePrice + optionalEquipment - discount);
      document.getElementById('newEnergyInvoicePrice').value = Math.round(invoicePrice);
      return invoicePrice;
    }
    
    // æ–°èƒ½æºè®¡ç®— - è´­ç½®ç¨
    function calculateNewEnergyPurchaseTax() {
      const invoicePrice = parseFloat(document.getElementById('newEnergyInvoicePrice').value) || 0;
      const taxNote = document.getElementById('newEnergyTaxNote');
      const taxNoteContainer = taxNote.parentElement;
      
      if (invoicePrice <= 339000) {
        // å¼€ç¥¨ä»·ä½äº33.9ä¸‡å…ƒå…å¾è´­ç½®ç¨
        document.getElementById('newEnergyPurchaseTax').value = '0.00';
        taxNote.textContent = 'å…å¾è´­ç½®ç¨';
        taxNote.className = 'text-green-600';
        taxNoteContainer.style.display = 'block';
        return 0;
      } else {
        // å¼€ç¥¨ä»·é«˜äº33.9ä¸‡å…ƒï¼Œè´­ç½®ç¨ = (å¼€ç¥¨ä»· - 339000) / 11.3
        const purchaseTax = (invoicePrice - 339000) / 11.3;
        document.getElementById('newEnergyPurchaseTax').value = purchaseTax.toFixed(2);
        taxNoteContainer.style.display = 'none';
        return purchaseTax;
      }
    }
    
    // æ–°èƒ½æºè®¡ç®— - é€€ç¨
    function calculateNewEnergyTaxRefund() {
      const invoicePrice = parseFloat(document.getElementById('newEnergyInvoicePrice').value) || 0;
      const taxRefund = invoicePrice / 1.13 * 0.13;
      document.getElementById('newEnergyTaxRefund').value = taxRefund.toFixed(2);
      return taxRefund;
    }
    
    // æ–°èƒ½æºè®¡ç®— - é€€ç¨æ‰‹ç»­è´¹
    function calculateNewEnergyTaxRefundFee() {
      const taxRefund = parseFloat(document.getElementById('newEnergyTaxRefund').value) || 0;
      const taxRefundFee = taxRefund * 0.025;
      document.getElementById('newEnergyTaxRefundFee').value = Math.round(taxRefundFee);
      return taxRefundFee;
    }
    
    // æ–°èƒ½æºè®¡ç®— - è´­è½¦æˆæœ¬
    function calculateNewEnergyPurchaseCost() {
      const invoicePrice = parseFloat(document.getElementById('newEnergyInvoicePrice').value) || 0;
      const purchaseTax = calculateNewEnergyPurchaseTax();
      const qualificationFee = parseFloat(document.getElementById('newEnergyQualificationFee').value) || 0;
      const agencyFee = parseFloat(document.getElementById('newEnergyAgencyFee').value) || 0;
      const taxRefund = parseFloat(document.getElementById('newEnergyTaxRefund').value) || 0;
      const taxRefundFee = calculateNewEnergyTaxRefundFee();
      const domesticShipping = parseFloat(document.getElementById('newEnergyDomesticShipping').value) || 0;
      const internationalShipping = parseFloat(document.getElementById('newEnergyInternationalShipping').value) || 0;
      const compulsoryInsurance = parseFloat(document.getElementById('newEnergyCompulsoryInsurance').value) || 0;
      
      const purchaseCost = invoicePrice + purchaseTax + qualificationFee + agencyFee + taxRefundFee + domesticShipping + internationalShipping + compulsoryInsurance - taxRefund;
      document.getElementById('newEnergyPurchaseCost').value = Math.round(purchaseCost);
      return purchaseCost;
    }
    
    // æ–°èƒ½æºè®¡ç®— - äººæ°‘å¸æŠ¥ä»·
    function calculateNewEnergyRmbQuote() {
      const purchaseCost = parseFloat(document.getElementById('newEnergyPurchaseCost').value) || 0;
      const markup = parseFloat(document.getElementById('newEnergyMarkup').value) || 0;
      const rmbQuote = purchaseCost + markup;
      const rmbInput = document.getElementById('newEnergyRmbQuote');
      rmbInput.value = Math.round(rmbQuote);
      rmbInput.dispatchEvent(new Event('input'));
      return rmbQuote;
    }
    
    // è®¡ç®—æœ€ç»ˆæŠ¥ä»·ï¼ˆåªç”¨æ–°è½¦è¡¨å•å­—æ®µï¼‰
    function calculateFinalQuote() {
      const rmbQuote = parseFloat(document.getElementById('rmbQuote').value) || 0;
      const exchangeRate = parseFloat(document.getElementById('exchangeRate').value) || 0;
      const currency = document.getElementById('currency').value;
      let seaFreight = parseFloat(document.getElementById('seaFreight').value) || 0;
      if (currency && exchangeRate > 0 && rmbQuote > 0) {
        let finalQuote = rmbQuote / exchangeRate;
        if (seaFreight > 0) finalQuote += seaFreight;
        document.getElementById('finalQuote').value = Math.round(finalQuote);
        
        // ä¿®æ”¹ï¼šè®¡ç®—æˆæœ¬ä»·æ ¼ï¼ˆæ–°å…¬å¼ï¼‰
        const invoicePrice = parseFloat(document.getElementById('invoicePrice').value) || 0;
        const compulsoryInsurance = parseFloat(document.getElementById('compulsoryInsurance').value) || 0;
        const taxRefund = parseFloat(document.getElementById('taxRefund').value) || 0;
        const domesticShipping = parseFloat(document.getElementById('domesticShipping').value) || 0;
        const internationalShipping = parseFloat(document.getElementById('internationalShipping').value) || 0;
        const markup = parseFloat(document.getElementById('markup').value) || 0;
        
        const costPrice = (invoicePrice + compulsoryInsurance + invoicePrice * 0.022 - taxRefund + domesticShipping + internationalShipping + markup) / exchangeRate + seaFreight;
        document.getElementById('costPrice').value = Math.round(costPrice);
        
        return finalQuote;
      }
      document.getElementById('finalQuote').value = '';
      document.getElementById('costPrice').value = '';
      return 0;
    }
    
    // æ–°è½¦è®¡ç®— - æ‰€æœ‰è®¡ç®—
    function calculateNewCarAll() {
      calculateNewCarInvoicePrice();
      calculateNewCarTaxRefund();
      calculateNewCarServiceFee();
      calculateNewCarPurchaseCost();
      calculateNewCarRmbQuote();
      calculateFinalQuote();
    }
    
    // äºŒæ‰‹è½¦è®¡ç®— - æ‰€æœ‰è®¡ç®—
    function calculateUsedCarAll() {
      calculateUsedCarInvoicePrice();
      calculateUsedCarPurchaseTax();
      calculateUsedCarTaxRefund();
      calculateUsedCarTaxRefundFee();
      calculateUsedCarPurchaseCost();
      calculateUsedCarRmbQuote();
      calculateFinalQuote();
    }
    
    // æ–°èƒ½æºè®¡ç®— - æ‰€æœ‰è®¡ç®—
    function calculateNewEnergyAll() {
      calculateNewEnergyInvoicePrice();
      calculateNewEnergyPurchaseTax();
      calculateNewEnergyTaxRefund();
      calculateNewEnergyTaxRefundFee();
      calculateNewEnergyPurchaseCost();
      calculateNewEnergyRmbQuote();
      calculateFinalQuote();
    }
    
    // ç»‘å®šæ–°è½¦è¡¨å•è¾“å…¥äº‹ä»¶
    document.getElementById('guidePrice').addEventListener('input', calculateNewCarAll);
    document.getElementById('discount').addEventListener('input', calculateNewCarAll);
    document.getElementById('optionalEquipment').addEventListener('input', calculateNewCarAll);
    document.getElementById('compulsoryInsurance').addEventListener('input', calculateNewCarAll);
    document.getElementById('domesticShipping').addEventListener('input', calculateNewCarAll);
    document.getElementById('internationalShipping').addEventListener('input', calculateNewCarAll);
    document.getElementById('markup').addEventListener('input', calculateNewCarAll);
    
    // ç»‘å®šäºŒæ‰‹è½¦è¡¨å•è¾“å…¥äº‹ä»¶
    document.getElementById('usedGuidePrice').addEventListener('input', calculateUsedCarAll);
    document.getElementById('usedDiscount').addEventListener('input', calculateUsedCarAll);
    document.getElementById('usedOptionalEquipment').addEventListener('input', calculateUsedCarAll);
    document.getElementById('usedCompulsoryInsurance').addEventListener('input', calculateUsedCarAll);
    document.getElementById('usedQualificationFee').addEventListener('input', calculateUsedCarAll);
    document.getElementById('usedAgencyFee').addEventListener('input', calculateUsedCarAll);
    document.getElementById('usedDomesticShipping').addEventListener('input', calculateUsedCarAll);
    document.getElementById('usedInternationalShipping').addEventListener('input', calculateUsedCarAll);
    document.getElementById('usedMarkup').addEventListener('input', calculateUsedCarAll);
    
    // ç»‘å®šæ–°èƒ½æºè¡¨å•è¾“å…¥äº‹ä»¶
    document.getElementById('newEnergyGuidePrice').addEventListener('input', calculateNewEnergyAll);
    document.getElementById('newEnergyDiscount').addEventListener('input', calculateNewEnergyAll);
    document.getElementById('newEnergyOptionalEquipment').addEventListener('input', calculateNewEnergyAll);
    document.getElementById('newEnergyCompulsoryInsurance').addEventListener('input', calculateNewEnergyAll);
    document.getElementById('newEnergyQualificationFee').addEventListener('input', calculateNewEnergyAll);
    document.getElementById('newEnergyAgencyFee').addEventListener('input', calculateNewEnergyAll);
    document.getElementById('newEnergyDomesticShipping').addEventListener('input', calculateNewEnergyAll);
    document.getElementById('newEnergyInternationalShipping').addEventListener('input', calculateNewEnergyAll);
    document.getElementById('newEnergyMarkup').addEventListener('input', calculateNewEnergyAll);
    
    // æ–°è½¦ã€äºŒæ‰‹è½¦è¾“å…¥å˜åŠ¨æ—¶éƒ½é‡æ–°è®¡ç®—æœ€ç»ˆæŠ¥ä»·
    document.getElementById('rmbQuote').addEventListener('input', calculateFinalQuote);
    document.getElementById('usedRmbQuote').addEventListener('input', calculateFinalQuote);
    
    // è®©æ±‡ç‡å’Œæœ€ç»ˆæŠ¥ä»·åœ¨æ–°è½¦/äºŒæ‰‹è½¦/æ–°èƒ½æºè¡¨å•ä¸‹æ–¹æ˜¾ç¤º
    function moveCurrencySection() {
      var el = document.getElementById('currencySection');
      if (el) {
        el.classList.remove('hidden');
      }
    }
    window.addEventListener('DOMContentLoaded', moveCurrencySection);

    // ç»‘å®šå¸ç§å’Œæ±‡ç‡äº‹ä»¶ï¼ˆæ–°è½¦ã€äºŒæ‰‹è½¦éƒ½é€‚ç”¨ï¼‰
    document.getElementById('currency').addEventListener('change', function() {
      const currency = this.value;
      if (currency) {
        fetchExchangeRate(currency);
      } else {
        document.getElementById('exchangeRate').value = '';
        document.getElementById('finalQuote').value = '';
      }
    });
    
    // æ±‡ç‡è¾“å…¥æ¡†æ‰‹åŠ¨è¾“å…¥äº‹ä»¶
    document.getElementById('exchangeRate').addEventListener('input', function() {
      calculateFinalQuote();
    });
    
    // è®¡ç®—æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆåªç”¨æ–°è½¦è¡¨å•å­—æ®µï¼‰
    document.getElementById('calculateBtn').addEventListener('click', function() {
      calculateNewCarAll();
      calculateFinalQuote();
      // æ˜¾ç¤ºç»“æœå¡ç‰‡
      const resultCard = document.getElementById('resultCard');
      resultCard.classList.remove('hidden');
      resultCard.classList.add('animate-fadeIn');
      // å¡«å……ç»“æœæ•°æ®
      fillResultData();
      // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
      resultCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
    
    // å¡«å……ç»“æœæ•°æ®ï¼ˆåªç”¨æ–°è½¦è¡¨å•å­—æ®µï¼‰
    function fillResultData() {
      // åŸºç¡€ä¿¡æ¯
      document.getElementById('resultCarModel').textContent = document.getElementById('carModel2').value || 'æœªå¡«å†™';
      // å‡ºå£ç±»å‹ï¼ˆä¿®æ­£ï¼šé€šè¿‡æŒ‰é’®ç»„è·å–ï¼‰
      const carTypeBtn = document.querySelector('.export-type-btn.border-primary.text-primary');
      const carTypeText = carTypeBtn ? carTypeBtn.textContent.trim() : 'æœªé€‰æ‹©';
      document.getElementById('resultCarType').textContent = carTypeText;
      // æŠ¥ä»·ç±»å‹
      let quoteTypeText = 'æœªé€‰æ‹©';
      document.querySelectorAll('input[name="globalQuoteType"]').forEach(radio => {
        if (radio.checked) quoteTypeText = radio.value;
      });
      document.getElementById('resultQuoteType').textContent = quoteTypeText;
      // å¡«å……æˆæœ¬æ˜ç»†
      const costDetails = document.getElementById('resultCostDetails');
      costDetails.innerHTML = '';
      addCostDetail(costDetails, 'å¼€ç¥¨ä»·', document.getElementById('invoicePrice').value);
      const optionalEquipment = document.getElementById('optionalEquipment').value;
      if (optionalEquipment && parseFloat(optionalEquipment) > 0) {
        addCostDetail(costDetails, 'é€‰è£…', optionalEquipment);
      }
      addCostDetail(costDetails, 'å›½å†…è¿è¾“', document.getElementById('domesticShipping').value);
      const internationalShipping = document.getElementById('internationalShipping').value;
      if (internationalShipping) {
        addCostDetail(costDetails, 'å›½é™…è¿è¾“', internationalShipping);
      }
      const compulsoryInsurance = document.getElementById('compulsoryInsurance').value;
      if (compulsoryInsurance && parseFloat(compulsoryInsurance) > 0) {
        addCostDetail(costDetails, 'äº¤å¼ºé™©', compulsoryInsurance);
      }
      addCostDetail(costDetails, 'é€€ç¨', document.getElementById('taxRefund').value, true);
      addCostDetail(costDetails, 'è´­è½¦æˆæœ¬', document.getElementById('purchaseCost').value, false, true);
      // æŠ¥ä»·æ±‡æ€»
      document.getElementById('resultRmbQuote').textContent = formatCurrencyInteger(Math.round(parseFloat(document.getElementById('rmbQuote').value) || 0));
      // æœ€ç»ˆæŠ¥ä»·
      const currency = document.getElementById('currency').value;
      const currencyText = currency === 'USD' ? 'ç¾å…ƒ (USD)' : currency === 'EUR' ? 'æ¬§å…ƒ (EUR)' : currency === 'GBP' ? 'è‹±é•‘ (GBP)' : 'æœªé€‰æ‹©';
      document.getElementById('resultCurrencyText').textContent = `æœ€ç»ˆæŠ¥ä»· (${currencyText})`;
      document.getElementById('resultFinalQuote').textContent = formatCurrencyInteger(Math.round(parseFloat(document.getElementById('finalQuote').value) || 0), currency);
    }
    
    // æ·»åŠ æˆæœ¬æ˜ç»†é¡¹
    function addCostDetail(container, label, value, isNegative = false, isTotal = false) {
      const li = document.createElement('li');
      li.className = `flex justify-between ${isTotal ? 'pt-2 border-t border-gray-100 font-medium' : ''}`;
      
      const spanLabel = document.createElement('span');
      spanLabel.className = 'text-gray-600';
      spanLabel.textContent = `${label}:`;
      
      const spanValue = document.createElement('span');
      spanValue.className = isNegative ? 'text-green-600' : isTotal ? 'text-primary' : 'text-gray-700';
      
      // è´­ç½®ç¨å’Œé€€ç¨ä¿ç•™å°æ•°ç‚¹åä¸¤ä½ï¼Œå…¶ä»–å–æ•´æ•°
      let displayValue;
      if (label === 'è´­ç½®ç¨' || label === 'é€€ç¨') {
        displayValue = formatCurrency(parseFloat(value) || 0);
      } else {
        displayValue = formatCurrencyInteger(Math.round(parseFloat(value) || 0));
      }
      spanValue.textContent = displayValue;
      
      li.appendChild(spanLabel);
      li.appendChild(spanValue);
      container.appendChild(li);
    }
    
    // åˆå§‹åŒ–é¡µé¢æ—¶è®¾ç½®é»˜è®¤å€¼
    window.addEventListener('load', function() {
      // è®¾ç½®æ‰‹ç»­è´¹æ»‘å—é»˜è®¤å€¼
      const serviceFeeRate = document.getElementById('serviceFeeRate');
      const serviceFeeRateValue = document.getElementById('serviceFeeRateValue');
      serviceFeeRate.value = '0.04';
      serviceFeeRateValue.textContent = '0.04';
      // è‡ªåŠ¨è·å–ç¾å…ƒæ±‡ç‡
      var currencySelect = document.getElementById('currency');
      if (currencySelect) {
        currencySelect.value = currencySelect.options[0].value;
      }
      fetchExchangeRate(document.getElementById('currency').value);
      // è®¾ç½®é»˜è®¤ä¸»é¢˜ï¼ˆæ–°è½¦ä¸»é¢˜ï¼‰
      switchToNewCarTheme();
      // åˆå§‹åŒ–ä¸»é¢˜ç³»ç»Ÿ
      initThemeSystem();
      // ä¼˜å…ˆçº§æœ€é«˜ï¼šé¡µé¢ä¸€è¿›å…¥å°±fetchæ±‡ç‡
      var currencySelect = document.getElementById('currency');
      var currencyValue = currencySelect ? currencySelect.value : 'USD';
      fetchExchangeRate(currencyValue);
    });

    // è·å–æ±‡ç‡
    function fetchExchangeRate(currency) {
      const exchangeRateInput = document.getElementById('exchangeRate');
      const exchangeRateLabel = document.getElementById('exchangeRateLabel');
      exchangeRateInput.value = 'åŠ è½½ä¸­...';
      
      // ä¸»/å¤‡ key
      const mainAppId = '9625bee048bd4599842279906b9ca677';
      const backupAppId = '145b3ca7abb2474f9e1f30b2ed19b77f';
      const apiBase = 'https://openexchangerates.org/api/latest.json?symbols=USD,EUR,GBP,CNY';

      function handleRateData(data) {
        let rate = 0;
        if (currency === 'USD') {
          rate = data.rates.CNY / data.rates.USD;
        } else if (currency === 'EUR') {
          rate = data.rates.CNY / data.rates.EUR;
        } else if (currency === 'GBP') {
          rate = data.rates.CNY / data.rates.GBP;
        }
        exchangeRateLabel.textContent = `æ±‡ç‡ å®æ—¶åŸºå‡†ï¼š${rate.toFixed(2)}`;
        exchangeRateInput.value = (rate - 0.05).toFixed(2);
        calculateFinalQuote();
      }

      function handleError() {
        exchangeRateInput.value = '';
        exchangeRateLabel.textContent = 'æ±‡ç‡ å®æ—¶åŸºå‡†ï¼šè·å–å¤±è´¥';
        alert('æ±‡ç‡è·å–å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
      }

      // ä¸» key è¯·æ±‚
      fetch(`${apiBase}&app_id=${mainAppId}`)
        .then(res => {
          if (res.status === 403) throw new Error('403');
          return res.json();
        })
        .then(data => {
          if (data && data.rates) {
            handleRateData(data);
          } else {
            throw new Error('no rates');
          }
        })
        .catch(err => {
          // 403 æˆ–å…¶ä»–é”™è¯¯ï¼Œå°è¯•å¤‡ç”¨ key
          fetch(`${apiBase}&app_id=${backupAppId}`)
            .then(res => {
              if (res.status === 403) throw new Error('403');
              return res.json();
            })
            .then(data => {
              if (data && data.rates) {
                handleRateData(data);
              } else {
                handleError();
              }
            })
            .catch(handleError);
        });
    }

    // è®°å½•æ¯ä¸ªè¡¨å•çš„æŠ¥ä»·ç±»å‹
    const quoteTypeState = {
      new: 'EXW',
      used: 'EXW',
      newEnergyTax: 'EXW'
    };

    // åˆ‡æ¢è¡¨å•æ—¶åŒæ­¥æŠ¥ä»·ç±»å‹å•é€‰æ¡†
    function syncGlobalQuoteType(type) {
      const value = quoteTypeState[type] || 'EXW';
      document.querySelectorAll('input[name="globalQuoteType"]').forEach(radio => {
        radio.checked = (radio.value === value);
      });
    }

    // å‡ºå£ç±»å‹æŒ‰é’®ç»„åˆ‡æ¢é€»è¾‘ï¼ˆå¢å¼ºï¼šåŒæ­¥æŠ¥ä»·ç±»å‹å•é€‰æ¡†ï¼‰
    function showFormByType(type) {
      document.getElementById('newCarForm').classList.add('hidden');
      document.getElementById('usedCarForm').classList.add('hidden');
      document.getElementById('newEnergyForm').classList.add('hidden');
      // æŒ‰é’®é«˜äº®
      document.querySelectorAll('.export-type-btn').forEach(btn => {
        if (btn.getAttribute('data-type') === type) {
          btn.classList.add('border-primary', 'text-primary');
          btn.classList.remove('border-gray-300', 'text-gray-700');
        } else {
          btn.classList.remove('border-primary', 'text-primary');
          btn.classList.add('border-gray-300', 'text-gray-700');
        }
      });
      if (type === 'new') {
        document.getElementById('newCarForm').classList.remove('hidden');
        document.getElementById('newCarForm').classList.add('animate-fadeIn');
        switchToNewCarTheme();
      } else if (type === 'used') {
        document.getElementById('usedCarForm').classList.remove('hidden');
        document.getElementById('usedCarForm').classList.add('animate-fadeIn');
        switchToUsedCarTheme();
      } else if (type === 'newEnergyTax') {
        document.getElementById('newEnergyForm').classList.remove('hidden');
        document.getElementById('newEnergyForm').classList.add('animate-fadeIn');
        switchToNewEnergyTheme();
      }
      // åŒæ­¥æŠ¥ä»·ç±»å‹å•é€‰æ¡†
      syncGlobalQuoteType(type);
      // è§¦å‘æŠ¥ä»·ç±»å‹ç›¸å…³é€»è¾‘
      handleQuoteTypeChange(type);
    }

    // ç›‘å¬æŒ‰é’®ç»„
    document.querySelectorAll('.export-type-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        showFormByType(this.getAttribute('data-type'));
      });
    });

    // ç›‘å¬å…¨å±€æŠ¥ä»·ç±»å‹å•é€‰æ¡†
    document.querySelectorAll('input[name="globalQuoteType"]').forEach(radio => {
      radio.addEventListener('change', function() {
        if (!this.checked) return;
        const type = getCurrentFormType();
        quoteTypeState[type] = this.value;
        handleQuoteTypeChange(type);
      });
    });

    // å¤„ç†æŠ¥ä»·ç±»å‹åˆ‡æ¢ç›¸å…³é€»è¾‘ï¼ˆå›½é™…è¿è¾“åŒºå—æ˜¾ç¤º/éšè—+é‡æ–°è®¡ç®—ï¼‰
    function handleQuoteTypeChange(type) {
      // æ–°è½¦
      if (type === 'new') {
        const container = document.getElementById('internationalShippingContainer');
        if (quoteTypeState.new === 'EXW') {
          container.classList.add('hidden');
          document.getElementById('internationalShipping').value = '';
        } else {
          container.classList.remove('hidden');
          container.classList.add('animate-fadeIn');
        }
        calculateNewCarAll();
      } else if (type === 'used') {
        const container = document.getElementById('usedInternationalShippingContainer');
        if (quoteTypeState.used === 'EXW') {
          container.classList.add('hidden');
          document.getElementById('usedInternationalShipping').value = '';
        } else {
          container.classList.remove('hidden');
          container.classList.add('animate-fadeIn');
        }
        calculateUsedCarAll();
      } else if (type === 'newEnergyTax') {
        const container = document.getElementById('newEnergyInternationalShippingContainer');
        if (quoteTypeState.newEnergyTax === 'EXW') {
          container.classList.add('hidden');
          document.getElementById('newEnergyInternationalShipping').value = '';
        } else {
          container.classList.remove('hidden');
          container.classList.add('animate-fadeIn');
        }
        calculateNewEnergyAll();
      }
      // æ–°è½¦
      if (quoteTypeState.new === 'CIF') {
        document.getElementById('seaFreightContainer').classList.remove('hidden');
      } else {
        document.getElementById('seaFreightContainer').classList.add('hidden');
        document.getElementById('seaFreight').value = '';
      }
      // äºŒæ‰‹è½¦
      if (quoteTypeState.used === 'CIF') {
        document.getElementById('usedSeaFreightContainer').classList.remove('hidden');
      } else {
        document.getElementById('usedSeaFreightContainer').classList.add('hidden');
        document.getElementById('usedSeaFreight').value = '';
      }
      // æ–°èƒ½æº
      if (quoteTypeState.newEnergyTax === 'CIF') {
        document.getElementById('newEnergySeaFreightContainer').classList.remove('hidden');
      } else {
        document.getElementById('newEnergySeaFreightContainer').classList.add('hidden');
        document.getElementById('newEnergySeaFreight').value = '';
      }
      // æ–°è½¦è¿è¾“è´¹ç”¨å¸ƒå±€
      const shippingGrid = document.getElementById('shippingGrid');
      let newCols = 1;
      if (!document.getElementById('internationalShippingContainer').classList.contains('hidden')) newCols++;
      if (!document.getElementById('seaFreightContainer').classList.contains('hidden')) newCols++;
      shippingGrid.className = `grid grid-cols-${newCols} gap-4`;
      // äºŒæ‰‹è½¦è¿è¾“è´¹ç”¨å¸ƒå±€
      const usedShippingGrid = document.getElementById('usedShippingGrid');
      let usedCols = 1;
      if (!document.getElementById('usedInternationalShippingContainer').classList.contains('hidden')) usedCols++;
      if (!document.getElementById('usedSeaFreightContainer').classList.contains('hidden')) usedCols++;
      usedShippingGrid.className = `grid grid-cols-${usedCols} gap-4`;
      // æ–°èƒ½æºè¿è¾“è´¹ç”¨å¸ƒå±€
      const newEnergyShippingGrid = document.getElementById('newEnergyShippingGrid');
      let newEnergyCols = 1;
      if (!document.getElementById('newEnergyInternationalShippingContainer').classList.contains('hidden')) newEnergyCols++;
      if (!document.getElementById('newEnergySeaFreightContainer').classList.contains('hidden')) newEnergyCols++;
      newEnergyShippingGrid.className = `grid grid-cols-${newEnergyCols} gap-4`;
    }

    // è·å–å½“å‰æ´»åŠ¨è¡¨å•ç±»å‹
    function getCurrentFormType() {
      const activeBtn = document.querySelector('.export-type-btn.border-primary.text-primary');
      return activeBtn ? activeBtn.dataset.type : 'new';
    }

    // é¡µé¢åˆå§‹åŒ–æ—¶é»˜è®¤æ˜¾ç¤ºæ–°è½¦è¡¨å•å¹¶é«˜äº®æŒ‰é’®ã€åŒæ­¥æŠ¥ä»·ç±»å‹
    window.addEventListener('DOMContentLoaded', function() {
      showFormByType('new');
    });

    // å¸ç§åˆ‡æ¢æ—¶åŒæ­¥å›½æ——
    const currencySelect = document.getElementById('currency');
    const currencyFlag = document.getElementById('currencyFlag');
    function updateCurrencyFlag() {
      const val = currencySelect.value;
      let flag = 'ğŸ‡ºğŸ‡¸';
      if (val === 'USD') flag = 'ğŸ‡ºğŸ‡¸';
      else if (val === 'EUR') flag = 'ğŸ‡ªğŸ‡º';
      else if (val === 'GBP') flag = 'ğŸ‡¬ğŸ‡§';
      currencyFlag.textContent = flag;
    }
    currencySelect.addEventListener('change', updateCurrencyFlag);
    window.addEventListener('DOMContentLoaded', updateCurrencyFlag);

    // äºŒæ‰‹è½¦å¸ç§åˆ‡æ¢
    const currencySelectUsed = document.getElementById('currencyUsed');
    const currencyFlagUsed = document.getElementById('currencyFlagUsed');
    function updateCurrencyFlagUsed() {
      const val = currencySelectUsed.value;
      let flag = 'ğŸ‡ºğŸ‡¸';
      if (val === 'USD') flag = 'ğŸ‡ºğŸ‡¸';
      else if (val === 'EUR') flag = 'ğŸ‡ªğŸ‡º';
      else if (val === 'GBP') flag = 'ğŸ‡¬ğŸ‡§';
      currencyFlagUsed.textContent = flag;
      fetchExchangeRateUsed(val);
    }
    currencySelectUsed.addEventListener('change', updateCurrencyFlagUsed);
    window.addEventListener('DOMContentLoaded', updateCurrencyFlagUsed);

    // æ–°èƒ½æºå¸ç§åˆ‡æ¢
    const currencySelectNewEnergy = document.getElementById('currencyNewEnergy');
    const currencyFlagNewEnergy = document.getElementById('currencyFlagNewEnergy');
    function updateCurrencyFlagNewEnergy() {
      const val = currencySelectNewEnergy.value;
      let flag = 'ğŸ‡ºğŸ‡¸';
      if (val === 'USD') flag = 'ğŸ‡ºğŸ‡¸';
      else if (val === 'EUR') flag = 'ğŸ‡ªğŸ‡º';
      else if (val === 'GBP') flag = 'ğŸ‡¬ğŸ‡§';
      currencyFlagNewEnergy.textContent = flag;
      fetchExchangeRateNewEnergy(val);
    }
    currencySelectNewEnergy.addEventListener('change', updateCurrencyFlagNewEnergy);
    window.addEventListener('DOMContentLoaded', updateCurrencyFlagNewEnergy);

    // fetchExchangeRate ç”¨äºæ–°è½¦ï¼Œä¸‹é¢ä¸ºäºŒæ‰‹è½¦å’Œæ–°èƒ½æºè½¦å®ç°
    function fetchExchangeRateUsed(currency) {
      const exchangeRateInput = document.getElementById('exchangeRateUsed');
      const exchangeRateLabel = document.getElementById('exchangeRateLabelUsed');
      exchangeRateInput.value = 'åŠ è½½ä¸­...';
      const mainAppId = '9625bee048bd4599842279906b9ca677';
      const backupAppId = '145b3ca7abb2474f9e1f30b2ed19b77f';
      const apiBase = 'https://openexchangerates.org/api/latest.json?symbols=USD,EUR,GBP,CNY';
      function handleRateData(data) {
        let rate = 0;
        if (currency === 'USD') {
          rate = data.rates.CNY / data.rates.USD;
        } else if (currency === 'EUR') {
          rate = data.rates.CNY / data.rates.EUR;
        } else if (currency === 'GBP') {
          rate = data.rates.CNY / data.rates.GBP;
        }
        exchangeRateLabel.textContent = `æ±‡ç‡ å®æ—¶åŸºå‡†ï¼š${rate.toFixed(2)}`;
        exchangeRateInput.value = (rate - 0.05).toFixed(2);
      }
      function handleError() {
        exchangeRateInput.value = '';
        exchangeRateLabel.textContent = 'æ±‡ç‡ å®æ—¶åŸºå‡†ï¼šè·å–å¤±è´¥';
      }
      fetch(`${apiBase}&app_id=${mainAppId}`)
        .then(res => {
          if (res.status === 403) throw new Error('403');
          return res.json();
        })
        .then(data => {
          if (data && data.rates) {
            handleRateData(data);
          } else {
            throw new Error('no rates');
          }
        })
        .catch(err => {
          fetch(`${apiBase}&app_id=${backupAppId}`)
            .then(res => {
              if (res.status === 403) throw new Error('403');
              return res.json();
            })
            .then(data => {
              if (data && data.rates) {
                handleRateData(data);
              } else {
                handleError();
              }
            })
            .catch(handleError);
        });
    }
    function fetchExchangeRateNewEnergy(currency) {
      const exchangeRateInput = document.getElementById('exchangeRateNewEnergy');
      const exchangeRateLabel = document.getElementById('exchangeRateLabelNewEnergy');
      exchangeRateInput.value = 'åŠ è½½ä¸­...';
      const mainAppId = '9625bee048bd4599842279906b9ca677';
      const backupAppId = '145b3ca7abb2474f9e1f30b2ed19b77f';
      const apiBase = 'https://openexchangerates.org/api/latest.json?symbols=USD,EUR,GBP,CNY';
      function handleRateData(data) {
        let rate = 0;
        if (currency === 'USD') {
          rate = data.rates.CNY / data.rates.USD;
        } else if (currency === 'EUR') {
          rate = data.rates.CNY / data.rates.EUR;
        } else if (currency === 'GBP') {
          rate = data.rates.CNY / data.rates.GBP;
        }
        exchangeRateLabel.textContent = `æ±‡ç‡ å®æ—¶åŸºå‡†ï¼š${rate.toFixed(2)}`;
        exchangeRateInput.value = (rate - 0.05).toFixed(2);
      }
      function handleError() {
        exchangeRateInput.value = '';
        exchangeRateLabel.textContent = 'æ±‡ç‡ å®æ—¶åŸºå‡†ï¼šè·å–å¤±è´¥';
      }
      fetch(`${apiBase}&app_id=${mainAppId}`)
        .then(res => {
          if (res.status === 403) throw new Error('403');
          return res.json();
        })
        .then(data => {
          if (data && data.rates) {
            handleRateData(data);
          } else {
            throw new Error('no rates');
          }
        })
        .catch(err => {
          fetch(`${apiBase}&app_id=${backupAppId}`)
            .then(res => {
              if (res.status === 403) throw new Error('403');
              return res.json();
            })
            .then(data => {
              if (data && data.rates) {
                handleRateData(data);
              } else {
                handleError();
              }
            })
            .catch(handleError);
        });
    }

    // äºŒæ‰‹è½¦æœ€ç»ˆæŠ¥ä»·è®¡ç®—
    function calculateUsedCarFinalQuote() {
      const purchaseCost = parseFloat(document.getElementById('usedPurchaseCost').value) || 0;
      const rmbQuote = parseFloat(document.getElementById('usedRmbQuote').value) || 0;
      const exchangeRate = parseFloat(document.getElementById('exchangeRateUsed').value) || 0;
      let seaFreight = parseFloat(document.getElementById('usedSeaFreight').value) || 0;
      if (exchangeRate > 0) {
        document.getElementById('costPriceUsed').value = Math.round(purchaseCost / exchangeRate + seaFreight);
        let finalQuote = rmbQuote / exchangeRate;
        if (seaFreight > 0) finalQuote += seaFreight;
        document.getElementById('finalQuoteUsed').value = Math.round(finalQuote);
      } else {
        document.getElementById('costPriceUsed').value = '';
        document.getElementById('finalQuoteUsed').value = '';
      }
    }
    // æ–°èƒ½æºè½¦æœ€ç»ˆæŠ¥ä»·è®¡ç®—
    function calculateNewEnergyFinalQuote() {
      const purchaseCost = parseFloat(document.getElementById('newEnergyPurchaseCost').value) || 0;
      const rmbQuote = parseFloat(document.getElementById('newEnergyRmbQuote').value) || 0;
      const exchangeRate = parseFloat(document.getElementById('exchangeRateNewEnergy').value) || 0;
      let seaFreight = parseFloat(document.getElementById('newEnergySeaFreight').value) || 0;
      if (exchangeRate > 0) {
        document.getElementById('costPriceNewEnergy').value = Math.round(purchaseCost / exchangeRate + seaFreight);
        let finalQuote = rmbQuote / exchangeRate;
        if (seaFreight > 0) finalQuote += seaFreight;
        document.getElementById('finalQuoteNewEnergy').value = Math.round(finalQuote);
      } else {
        document.getElementById('costPriceNewEnergy').value = '';
        document.getElementById('finalQuoteNewEnergy').value = '';
      }
    }
    // äº‹ä»¶ç›‘å¬
    ['usedPurchaseCost', 'usedRmbQuote', 'exchangeRateUsed'].forEach(id => {
      document.getElementById(id).addEventListener('input', calculateUsedCarFinalQuote);
    });
    ['newEnergyPurchaseCost', 'newEnergyRmbQuote', 'exchangeRateNewEnergy'].forEach(id => {
      document.getElementById(id).addEventListener('input', calculateNewEnergyFinalQuote);
    });
    document.getElementById('seaFreight').addEventListener('input', calculateFinalQuote);
    document.getElementById('usedSeaFreight').addEventListener('input', calculateUsedCarFinalQuote);
    document.getElementById('newEnergySeaFreight').addEventListener('input', calculateNewEnergyFinalQuote);
  </script>

  <script>
    // å“ç‰Œå’Œè½¦å‹æ™ºèƒ½æœç´¢
    (function() {
      // åªä¿ç•™è½¦å‹æœç´¢
      const carInput = document.getElementById('searchCarInput');
      const carResultBox = document.getElementById('searchCarResults');
      let allCars = [];
      let allCarsLoaded = false;

      // åŠ è½½æ‰€æœ‰å“ç‰Œè½¦å‹æ•°æ®
      async function loadAllCars() {
        if (allCarsLoaded) return;
        try {
          const brandsRes = await fetch('/api/brands');
          const brands = await brandsRes.json();
          let carPromises = brands.map(async b => {
            try {
              const res = await fetch(`/api/brands/${b.name}`);
              const data = await res.json();
              if (data.cars && Array.isArray(data.cars)) {
                return data.cars.map(car => ({
                  ...car,
                  brand: data.brand,
                  brandImage: data.brandImage
                }));
              }
            } catch (e) { return []; }
            return [];
          });
          const carsArr = await Promise.all(carPromises);
          allCars = carsArr.flat();
          allCarsLoaded = true;
        } catch (e) {
          console.error('åŠ è½½æ‰€æœ‰è½¦å‹å¤±è´¥', e);
        }
      }

      // å±•ç¤ºè½¦å‹æœç´¢ç»“æœ
      function showCarResults(keyword) {
        if (!allCarsLoaded) {
          carResultBox.innerHTML = '<div class="px-4 py-2 text-gray-400 text-center">æ­£åœ¨åŠ è½½è½¦å‹æ•°æ®...</div>';
          carResultBox.classList.remove('hidden');
          positionDropdown();
          return;
        }
        carResultBox.innerHTML = '';
        if (!keyword) {
          carResultBox.classList.add('hidden');
          return;
        }
        const results = [];
        
        // é¦–å…ˆå°è¯•è½¦å‹åå’Œé…ç½®ååŒ¹é…ï¼ˆä¼˜å…ˆçº§æ›´é«˜ï¼‰
        allCars.forEach(car => {
          if (car.carName && car.carName.toLowerCase().includes(keyword.toLowerCase())) {
            if (car.configs && car.configs.length > 0) {
              car.configs.forEach(config => {
                results.push({ car, config, displayText: config.configName });
              });
            } else {
              results.push({ car, config: null, displayText: car.carName });
            }
          } else if (car.configs) {
            car.configs.forEach(config => {
              if (config.configName && config.configName.toLowerCase().includes(keyword.toLowerCase())) {
                results.push({ car, config, displayText: config.configName });
              }
            });
          }
        });
        
        // å¦‚æœè½¦å‹åå’Œé…ç½®åéƒ½æ²¡æœ‰åŒ¹é…åˆ°ï¼Œå†å°è¯•å“ç‰ŒååŒ¹é…
        if (results.length === 0) {
          const matchedBrands = new Set();
          allCars.forEach(car => {
            if (car.brand && car.brand.toLowerCase().includes(keyword.toLowerCase())) {
              matchedBrands.add(car.brand);
            }
          });
          if (matchedBrands.size > 0) {
            // å±•ç¤ºæ‰€æœ‰åŒ¹é…å“ç‰Œä¸‹çš„è½¦å‹
            allCars.forEach(car => {
              if (matchedBrands.has(car.brand)) {
                if (car.configs && car.configs.length > 0) {
                  car.configs.forEach(config => {
                    results.push({ car, config, displayText: config.configName });
                  });
                } else {
                  results.push({ car, config: null, displayText: car.carName });
                }
              }
            });
          }
        }
        if (results.length === 0) {
          carResultBox.innerHTML = '<div class="px-4 py-2 text-gray-400 text-center">æœªæ‰¾åˆ°ç›¸å…³è½¦å‹</div>';
          carResultBox.classList.remove('hidden');
          positionDropdown();
          return;
        }
        results.slice(0, 20).forEach(result => {
          const div = document.createElement('div');
          div.className = 'flex items-center gap-3 px-4 py-2 cursor-pointer hover:bg-gray-50 border-b last:border-b-0';
          // å“ç‰Œlogo
          if (result.car.brandImage) {
            const img = document.createElement('img');
            img.src = result.car.brandImage;
            img.alt = result.car.brand;
            img.className = 'w-8 h-8 object-contain rounded mr-2';
            div.appendChild(img);
          }
          // è½¦å‹å’Œé…ç½®åç§°åˆ†è‰²æ˜¾ç¤º
          let mainName = '';
          let subName = '';
          if (result.config && result.car && result.config.configName && result.car.carName && result.config.configName.startsWith(result.car.carName)) {
            mainName = result.car.carName;
            subName = result.config.configName.slice(result.car.carName.length);
          } else if (result.car && result.car.carName) {
            mainName = result.car.carName;
            subName = '';
          } else {
            mainName = result.displayText;
            subName = '';
          }
          const nameSpan = document.createElement('span');
          nameSpan.className = 'font-medium flex-1';
          nameSpan.innerHTML = `<span>${mainName}</span><span class='text-gray-400'>${subName}</span>`;
          div.appendChild(nameSpan);
          // æŒ‡å¯¼ä»·
          if (result.config && result.config.price) {
            const priceSpan = document.createElement('span');
            priceSpan.textContent = result.config.price;
            priceSpan.className = 'text-red-500 text-sm font-medium';
            div.appendChild(priceSpan);
          }
          // ç‚¹å‡»é€‰æ‹©
          div.onmousedown = function(e) {
            e.preventDefault();
            selectCar(result.car, result.config);
          };
          carResultBox.appendChild(div);
        });
        carResultBox.classList.remove('hidden');
        positionDropdown();
      }

      // å®šä½ä¸‹æ‹‰èœå•åˆ°æœç´¢è¾“å…¥æ¡†ä¸‹æ–¹
      function positionDropdown() {
        const input = document.getElementById('searchCarInput');
        const dropdown = document.getElementById('searchCarResults');
        const historyPanel = document.getElementById('searchHistoryPanel');
        
        if (input && dropdown) {
          const rect = input.getBoundingClientRect();
          dropdown.style.position = 'fixed';
          dropdown.style.top = (rect.bottom + 5) + 'px';
          dropdown.style.left = rect.left + 'px';
          dropdown.style.width = rect.width + 'px';
          dropdown.style.maxWidth = rect.width + 'px';
        }
        
        if (input && historyPanel) {
          const rect = input.getBoundingClientRect();
          historyPanel.style.position = 'fixed';
          historyPanel.style.top = (rect.bottom + 5) + 'px';
          historyPanel.style.left = rect.left + 'px';
          historyPanel.style.width = rect.width + 'px';
          historyPanel.style.maxWidth = rect.width + 'px';
        }
      }

      // é€‰æ‹©è½¦å‹
      function selectCar(car, config) {
        const displayText = config ? config.configName : car.carName;
        carInput.value = displayText;
        carResultBox.classList.add('hidden');
        fillBaseInfo({ ...car, ...config });
      }

      // å¡«å……åŸºç¡€ä¿¡æ¯ï¼ˆåŒåŸé€»è¾‘ï¼‰
      function parsePriceToNumber(priceStr) {
        if (!priceStr) return '';
        priceStr = priceStr.trim();
        if (priceStr.endsWith('ä¸‡')) {
          return Math.round(parseFloat(priceStr.replace('ä¸‡', '')) * 10000);
        } else {
          return Math.round(parseFloat(priceStr.replace(/[^\d.]/g, '')));
        }
      }
      function fillBaseInfo(car) {
        document.getElementById('brandName2').value = car.seriesName || '';
        const logoBox = document.getElementById('brandLogoBox2');
        logoBox.innerHTML = '';
        if (car.brandImage) {
          const logoImg = document.createElement('img');
          logoImg.src = car.brandImage;
          logoImg.alt = car.brand;
          logoImg.className = 'w-12 h-12 object-contain';
          logoBox.appendChild(logoImg);
        }
        document.getElementById('carModel2').value = car.carName || '';
        document.getElementById('fuelType2').value = car.fuelType || '';
        document.getElementById('size2').value = car.size || '';
        document.getElementById('price2').value = car.price || '';
        const priceNum = parsePriceToNumber(car.price);
        if(document.getElementById('guidePrice')) document.getElementById('guidePrice').value = priceNum || '';
        if(document.getElementById('usedGuidePrice')) document.getElementById('usedGuidePrice').value = priceNum || '';
        if(document.getElementById('newEnergyGuidePrice')) document.getElementById('newEnergyGuidePrice').value = priceNum || '';
        const carImgBox = document.getElementById('carMainImageBox');
        carImgBox.innerHTML = '';
        if (car.mainImage) {
          const carImg = document.createElement('img');
          carImg.src = car.mainImage;
          carImg.alt = car.carName;
          carImg.className = 'w-full h-full object-contain rounded shadow';
          carImgBox.appendChild(carImg);
        } else {
          // å¦‚æœæ²¡æœ‰å›¾ç‰‡ï¼Œæ˜¾ç¤ºå ä½ç¬¦
          const placeholder = document.createElement('div');
          placeholder.className = 'flex flex-col items-center justify-center text-gray-400 w-full h-full';
          placeholder.innerHTML = `
            <i class="fa fa-car text-4xl mb-2"></i>
            <span class="text-sm">æš‚æ— å›¾ç‰‡</span>
          `;
          carImgBox.appendChild(placeholder);
        }
        document.getElementById('baseInfoSection').classList.remove('hidden');
      }

      // äº‹ä»¶ç›‘å¬
      carInput.addEventListener('input', function() {
        if (!allCarsLoaded) {
          loadAllCars().then(() => showCarResults(this.value.trim()));
        } else {
          showCarResults(this.value.trim());
        }
      });
      carInput.addEventListener('blur', function() {
        setTimeout(() => carResultBox && carResultBox.classList.add('hidden'), 200);
      });
      carInput.addEventListener('focus', function() {
        if (carInput.value.trim()) {
          showCarResults(carInput.value.trim());
        }
      });
      document.addEventListener('click', function(event) {
        if (!carInput.contains(event.target) && !carResultBox.contains(event.target)) {
          carResultBox.classList.add('hidden');
        }
      });
      // é¡µé¢åŠ è½½æ—¶é¢„åŠ è½½æ‰€æœ‰è½¦å‹
      loadAllCars();
      
      // ====== æœç´¢å†å²è®°å½•åŠŸèƒ½ ======
      const SEARCH_HISTORY_KEY = 'car_search_history';
      const MAX_HISTORY_ITEMS = 10;
      
      // è·å–æœç´¢å†å²
      function getSearchHistory() {
        try {
          const history = localStorage.getItem(SEARCH_HISTORY_KEY);
          return history ? JSON.parse(history) : [];
        } catch (error) {
          console.error('è·å–æœç´¢å†å²å¤±è´¥:', error);
          return [];
        }
      }
      
      // ä¿å­˜æœç´¢å†å²
      function saveSearchHistory(searchTerm) {
        if (!searchTerm || searchTerm.trim() === '') return;
        
        try {
          let history = getSearchHistory();
          
          // ç§»é™¤é‡å¤é¡¹
          history = history.filter(item => item !== searchTerm);
          
          // æ·»åŠ åˆ°å¼€å¤´
          history.unshift(searchTerm);
          
          // é™åˆ¶æ•°é‡
          if (history.length > MAX_HISTORY_ITEMS) {
            history = history.slice(0, MAX_HISTORY_ITEMS);
          }
          
          localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(history));
        } catch (error) {
          console.error('ä¿å­˜æœç´¢å†å²å¤±è´¥:', error);
        }
      }
      
      // æ¸…é™¤æœç´¢å†å²
      function clearSearchHistory() {
        try {
          localStorage.removeItem(SEARCH_HISTORY_KEY);
          renderSearchHistory();
        } catch (error) {
          console.error('æ¸…é™¤æœç´¢å†å²å¤±è´¥:', error);
        }
      }
      
      // æ¸²æŸ“æœç´¢å†å²
      function renderSearchHistory() {
        const historyList = document.getElementById('searchHistoryList');
        const noHistoryMessage = document.getElementById('noHistoryMessage');
        const history = getSearchHistory();
        
        if (history.length === 0) {
          historyList.classList.add('hidden');
          noHistoryMessage.classList.remove('hidden');
          return;
        }
        
        historyList.classList.remove('hidden');
        noHistoryMessage.classList.add('hidden');
        
        historyList.innerHTML = '';
        
        history.forEach((searchTerm, index) => {
          const historyItem = document.createElement('div');
          historyItem.className = 'flex items-center justify-between p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors';
          
          const leftSection = document.createElement('div');
          leftSection.className = 'flex items-center flex-1';
          
          const icon = document.createElement('i');
          icon.className = 'fa fa-clock-o text-gray-400 mr-3 text-sm';
          
          const text = document.createElement('span');
          text.className = 'text-gray-700 text-sm';
          text.textContent = searchTerm;
          
          leftSection.appendChild(icon);
          leftSection.appendChild(text);
          
          const rightSection = document.createElement('div');
          rightSection.className = 'flex items-center';
          
          const deleteBtn = document.createElement('button');
          deleteBtn.className = 'text-gray-400 hover:text-red-500 transition-colors p-1';
          deleteBtn.innerHTML = '<i class="fa fa-times text-xs"></i>';
          deleteBtn.title = 'åˆ é™¤æ­¤è®°å½•';
          deleteBtn.onclick = (e) => {
            e.stopPropagation();
            deleteHistoryItem(index);
          };
          
          rightSection.appendChild(deleteBtn);
          
          historyItem.appendChild(leftSection);
          historyItem.appendChild(rightSection);
          
          // ç‚¹å‡»å†å²è®°å½•é¡¹
          historyItem.onclick = () => {
            carInput.value = searchTerm;
            hideSearchHistory();
            // ç›´æ¥è§¦å‘æœç´¢å¹¶å¡«å……åŸºç¡€ä¿¡æ¯
            showCarResults(searchTerm);
            // æ¨¡æ‹Ÿé€‰æ‹©ç¬¬ä¸€ä¸ªæœç´¢ç»“æœ
            setTimeout(() => {
              const firstResult = document.querySelector('#searchCarResults .border-b');
              if (firstResult) {
                firstResult.click();
              }
            }, 100);
          };
          
          historyList.appendChild(historyItem);
        });
      }
      
      // åˆ é™¤å•ä¸ªå†å²è®°å½•é¡¹
      function deleteHistoryItem(index) {
        try {
          let history = getSearchHistory();
          history.splice(index, 1);
          localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(history));
          renderSearchHistory();
        } catch (error) {
          console.error('åˆ é™¤å†å²è®°å½•å¤±è´¥:', error);
        }
      }
      
      // æ˜¾ç¤ºæœç´¢å†å²é¢æ¿
      function showSearchHistory() {
        const historyPanel = document.getElementById('searchHistoryPanel');
        const resultsPanel = document.getElementById('searchCarResults');
        
        resultsPanel.classList.add('hidden');
        historyPanel.classList.remove('hidden');
        renderSearchHistory();
        positionDropdown();
      }
      
      // éšè—æœç´¢å†å²é¢æ¿
      function hideSearchHistory() {
        const historyPanel = document.getElementById('searchHistoryPanel');
        historyPanel.classList.add('hidden');
      }
      
      // ç»‘å®šå†å²è®°å½•æŒ‰é’®äº‹ä»¶
      document.getElementById('showHistoryBtn').addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        showSearchHistory();
      });
      
      // ç»‘å®šæ¸…é™¤å†å²æŒ‰é’®äº‹ä»¶
      document.getElementById('clearHistoryBtn').addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æœç´¢å†å²å—ï¼Ÿ')) {
          clearSearchHistory();
        }
      });
      
      // ä¿®æ”¹é€‰æ‹©è½¦å‹å‡½æ•°ï¼Œæ·»åŠ å†å²è®°å½•ä¿å­˜
      const originalSelectCar = selectCar;
      selectCar = function(car, config) {
        const displayText = config ? config.configName : car.carName;
        carInput.value = displayText;
        carResultBox.classList.add('hidden');
        fillBaseInfo({ ...car, ...config });
        
        // ä¿å­˜åˆ°æœç´¢å†å²
        saveSearchHistory(displayText);
      };
      
      // ç‚¹å‡»å¤–éƒ¨éšè—å†å²é¢æ¿
      document.addEventListener('click', function(event) {
        const historyPanel = document.getElementById('searchHistoryPanel');
        const showHistoryBtn = document.getElementById('showHistoryBtn');
        
        if (!historyPanel.contains(event.target) && !showHistoryBtn.contains(event.target)) {
          hideSearchHistory();
        }
      });
      
      // æœç´¢è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶ï¼Œåªæ˜¾ç¤ºæœç´¢ç»“æœï¼Œä¸è‡ªåŠ¨æ˜¾ç¤ºå†å²è®°å½•
      carInput.addEventListener('focus', function() {
        if (carInput.value.trim()) {
          showCarResults(carInput.value.trim());
        }
      });
      
      // æœç´¢è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ—¶éšè—å†å²é¢æ¿
      carInput.addEventListener('blur', function() {
        setTimeout(() => {
          const historyPanel = document.getElementById('searchHistoryPanel');
          if (!historyPanel.contains(document.activeElement)) {
            hideSearchHistory();
          }
        }, 200);
      });
      
      // å¡ç‰‡æ‚¬æµ®æ•ˆæœ
      function initCardHoverEffects() {
        // ä¸ºæ‰€æœ‰å¡ç‰‡æ·»åŠ æ‚¬æµ®æ•ˆæœ
        const cards = document.querySelectorAll('.bg-gray-50.p-6.rounded-lg.border.border-gray-200');
        
        cards.forEach(card => {
          // è·³è¿‡æœç´¢å¡ç‰‡ï¼Œå› ä¸ºå®ƒå·²ç»æœ‰search-cardç±»
          if (card.classList.contains('search-card')) {
            return;
          }
          
          // æ·»åŠ æ‚¬æµ®ç±»
          if (!card.classList.contains('card-hover')) {
            card.classList.add('card-hover');
          }
          
          // æ·»åŠ ç‚¹å‡»æ‚¬æµ®åŠ¨ç”»
          card.addEventListener('click', function(e) {
            // å¦‚æœç‚¹å‡»çš„æ˜¯è¾“å…¥æ¡†ã€æŒ‰é’®æˆ–å…¶ä»–äº¤äº’å…ƒç´ ï¼Œä¸è§¦å‘æ‚¬æµ®æ•ˆæœ
            if (e.target.tagName === 'INPUT' || 
                e.target.tagName === 'BUTTON' || 
                e.target.tagName === 'SELECT' || 
                e.target.tagName === 'LABEL' ||
                e.target.closest('input') ||
                e.target.closest('button') ||
                e.target.closest('select') ||
                e.target.closest('label')) {
              return;
            }
            
            // ç§»é™¤ä¹‹å‰çš„åŠ¨ç”»ç±»
            card.classList.remove('card-float');
            
            // è§¦å‘é‡æ’ä»¥é‡æ–°å¼€å§‹åŠ¨ç”»
            void card.offsetWidth;
            
            // æ·»åŠ æ‚¬æµ®åŠ¨ç”»ç±»
            card.classList.add('card-float');
            
            // åŠ¨ç”»ç»“æŸåç§»é™¤ç±»
            setTimeout(() => {
              card.classList.remove('card-float');
            }, 600);
          });
        });
      }
      
      // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–å¡ç‰‡æ‚¬æµ®æ•ˆæœ
      document.addEventListener('DOMContentLoaded', function() {
        initCardHoverEffects();
      });
      
      // å½“åŠ¨æ€å†…å®¹åŠ è½½åé‡æ–°åˆå§‹åŒ–æ‚¬æµ®æ•ˆæœ
      const originalFillBaseInfo = fillBaseInfo;
      fillBaseInfo = function(carData) {
        originalFillBaseInfo(carData);
        // å»¶è¿Ÿä¸€ç‚¹æ—¶é—´ç¡®ä¿DOMæ›´æ–°å®Œæˆ
        setTimeout(initCardHoverEffects, 100);
      };
      
    })();
  </script>
</body>
</html>